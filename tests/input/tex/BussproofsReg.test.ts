import { beforeEach, describe, it } from '@jest/globals';
import { toXmlMatch } from '../../src/xmlMatch';
import { setupTexWithOutput, tex2mml } from '../../src/setupTex';

beforeEach(() => setupTexWithOutput(['base', 'ams', 'bussproofs']));

describe('BussproofsRegInf', () => {
  it('Single Axiom', () =>
    toXmlMatch(
      tex2mml('\\begin{prooftree}\\AxiomC{A}\\end{prooftree}'),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{A}\\end{prooftree}" display="block">\n  <mrow data-latex="\\begin{prooftree}\\AxiomC{A}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_axiom:true;bspr_proof:true">\n    <mspace width=".5ex"></mspace>\n    <mstyle displaystyle="false" scriptlevel="0">\n      <mtext>A</mtext>\n    </mstyle>\n    <mspace width=".5ex"></mspace>\n  </mrow>\n</math>'
    ));
  it('Unary Inference', () =>
    toXmlMatch(
      tex2mml('\\begin{prooftree}\\AxiomC{A}\\UnaryInfC{B}\\end{prooftree}'),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{A}\\UnaryInfC{B}\\end{prooftree}" display="block">\n  <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\begin{prooftree}\\AxiomC{A}\\UnaryInfC{B}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_inferenceRule:down;bspr_inference:1;bspr_proof:true">\n    <mtr>\n      <mtd>\n        <mtable framespacing="0 0">\n          <mtr>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{A}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>A</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n          </mtr>\n        </mtable>\n      </mtd>\n    </mtr>\n    <mtr>\n      <mtd>\n        <mrow>\n          <mspace width=".5ex"></mspace>\n          <mstyle displaystyle="false" scriptlevel="0">\n            <mtext>B</mtext>\n          </mstyle>\n          <mspace width=".5ex"></mspace>\n        </mrow>\n      </mtd>\n    </mtr>\n  </mtable>\n</math>'
    ));
  it('Binary Inference', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\BinaryInfC{C}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\BinaryInfC{C}\\end{prooftree}" display="block">\n  <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\BinaryInfC{C}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_inferenceRule:down;bspr_inference:2;bspr_proof:true">\n    <mtr>\n      <mtd>\n        <mtable framespacing="0 0">\n          <mtr>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{A}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>A</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n            <mtd></mtd>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{B}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>B</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n          </mtr>\n        </mtable>\n      </mtd>\n    </mtr>\n    <mtr>\n      <mtd>\n        <mrow>\n          <mspace width=".5ex"></mspace>\n          <mstyle displaystyle="false" scriptlevel="0">\n            <mtext>C</mtext>\n          </mstyle>\n          <mspace width=".5ex"></mspace>\n        </mrow>\n      </mtd>\n    </mtr>\n  </mtable>\n</math>'
    ));
  it('Trinary Inference', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\AxiomC{C}\\TrinaryInfC{D}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\AxiomC{C}\\TrinaryInfC{D}\\end{prooftree}" display="block">\n  <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\AxiomC{C}\\TrinaryInfC{D}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_inferenceRule:down;bspr_inference:3;bspr_proof:true">\n    <mtr>\n      <mtd>\n        <mtable framespacing="0 0">\n          <mtr>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{A}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>A</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n            <mtd></mtd>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{B}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>B</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n            <mtd></mtd>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{C}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>C</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n          </mtr>\n        </mtable>\n      </mtd>\n    </mtr>\n    <mtr>\n      <mtd>\n        <mrow>\n          <mspace width=".5ex"></mspace>\n          <mstyle displaystyle="false" scriptlevel="0">\n            <mtext>D</mtext>\n          </mstyle>\n          <mspace width=".5ex"></mspace>\n        </mrow>\n      </mtd>\n    </mtr>\n  </mtable>\n</math>'
    ));
  it('Quaternary Inference', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\AxiomC{C}\\AxiomC{D}\\QuaternaryInfC{E}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\AxiomC{C}\\AxiomC{D}\\QuaternaryInfC{E}\\end{prooftree}" display="block">\n  <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\AxiomC{C}\\AxiomC{D}\\QuaternaryInfC{E}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_inferenceRule:down;bspr_inference:4;bspr_proof:true">\n    <mtr>\n      <mtd>\n        <mtable framespacing="0 0">\n          <mtr>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{A}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>A</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n            <mtd></mtd>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{B}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>B</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n            <mtd></mtd>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{C}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>C</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n            <mtd></mtd>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{D}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>D</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n          </mtr>\n        </mtable>\n      </mtd>\n    </mtr>\n    <mtr>\n      <mtd>\n        <mrow>\n          <mspace width=".5ex"></mspace>\n          <mstyle displaystyle="false" scriptlevel="0">\n            <mtext>E</mtext>\n          </mstyle>\n          <mspace width=".5ex"></mspace>\n        </mrow>\n      </mtd>\n    </mtr>\n  </mtable>\n</math>'
    ));
  it('Quinary Inference', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\AxiomC{C}\\AxiomC{D}\\AxiomC{E}\\QuinaryInfC{F}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\AxiomC{C}\\AxiomC{D}\\AxiomC{E}\\QuinaryInfC{F}\\end{prooftree}" display="block">\n  <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\AxiomC{C}\\AxiomC{D}\\AxiomC{E}\\QuinaryInfC{F}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_inferenceRule:down;bspr_inference:5;bspr_proof:true">\n    <mtr>\n      <mtd>\n        <mtable framespacing="0 0">\n          <mtr>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{A}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>A</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n            <mtd></mtd>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{B}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>B</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n            <mtd></mtd>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{C}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>C</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n            <mtd></mtd>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{D}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>D</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n            <mtd></mtd>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AxiomC{E}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>E</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n          </mtr>\n        </mtable>\n      </mtd>\n    </mtr>\n    <mtr>\n      <mtd>\n        <mrow>\n          <mspace width=".5ex"></mspace>\n          <mstyle displaystyle="false" scriptlevel="0">\n            <mtext>F</mtext>\n          </mstyle>\n          <mspace width=".5ex"></mspace>\n        </mrow>\n      </mtd>\n    </mtr>\n  </mtable>\n</math>'
    ));
  it('Label Left', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{A}\\LeftLabel{L}\\UnaryInfC{B}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{A}\\LeftLabel{L}\\UnaryInfC{B}\\end{prooftree}" display="block">\n  <mrow data-latex="\\begin{prooftree}\\AxiomC{A}\\LeftLabel{L}\\UnaryInfC{B}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_labelledRule:left;bspr_inference:1;bspr_proof:true">\n    <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n      <mstyle displaystyle="false" scriptlevel="0">\n        <mtext>L</mtext>\n      </mstyle>\n    </mpadded>\n    <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n      <mtr>\n        <mtd>\n          <mtable framespacing="0 0">\n            <mtr>\n              <mtd rowalign="bottom">\n                <mrow data-latex="\\LeftLabel{L}" semantics="bspr_axiom:true">\n                  <mspace width=".5ex"></mspace>\n                  <mstyle displaystyle="false" scriptlevel="0">\n                    <mtext>A</mtext>\n                  </mstyle>\n                  <mspace width=".5ex"></mspace>\n                </mrow>\n              </mtd>\n            </mtr>\n          </mtable>\n        </mtd>\n      </mtr>\n      <mtr>\n        <mtd>\n          <mrow>\n            <mspace width=".5ex"></mspace>\n            <mstyle displaystyle="false" scriptlevel="0">\n              <mtext>B</mtext>\n            </mstyle>\n            <mspace width=".5ex"></mspace>\n          </mrow>\n        </mtd>\n      </mtr>\n    </mtable>\n  </mrow>\n</math>'
    ));
  it('Label Right', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{A}\\RightLabel{R}\\UnaryInfC{B}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{A}\\RightLabel{R}\\UnaryInfC{B}\\end{prooftree}" display="block">\n  <mrow data-latex="\\begin{prooftree}\\AxiomC{A}\\RightLabel{R}\\UnaryInfC{B}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_labelledRule:right;bspr_inference:1;bspr_proof:true">\n    <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n      <mtr>\n        <mtd>\n          <mtable framespacing="0 0">\n            <mtr>\n              <mtd rowalign="bottom">\n                <mrow data-latex="\\RightLabel{R}" semantics="bspr_axiom:true">\n                  <mspace width=".5ex"></mspace>\n                  <mstyle displaystyle="false" scriptlevel="0">\n                    <mtext>A</mtext>\n                  </mstyle>\n                  <mspace width=".5ex"></mspace>\n                </mrow>\n              </mtd>\n            </mtr>\n          </mtable>\n        </mtd>\n      </mtr>\n      <mtr>\n        <mtd>\n          <mrow>\n            <mspace width=".5ex"></mspace>\n            <mstyle displaystyle="false" scriptlevel="0">\n              <mtext>B</mtext>\n            </mstyle>\n            <mspace width=".5ex"></mspace>\n          </mrow>\n        </mtd>\n      </mtr>\n    </mtable>\n    <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n      <mstyle displaystyle="false" scriptlevel="0">\n        <mtext>R</mtext>\n      </mstyle>\n    </mpadded>\n  </mrow>\n</math>'
    ));
  it('Label Both', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{A}\\LeftLabel{L}\\RightLabel{R}\\UnaryInfC{B}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{A}\\LeftLabel{L}\\RightLabel{R}\\UnaryInfC{B}\\end{prooftree}" display="block">\n  <mrow data-latex="\\begin{prooftree}\\AxiomC{A}\\LeftLabel{L}\\RightLabel{R}\\UnaryInfC{B}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_labelledRule:both;bspr_inference:1;bspr_proof:true">\n    <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n      <mstyle displaystyle="false" scriptlevel="0">\n        <mtext>L</mtext>\n      </mstyle>\n    </mpadded>\n    <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n      <mtr>\n        <mtd>\n          <mtable framespacing="0 0">\n            <mtr>\n              <mtd rowalign="bottom">\n                <mrow data-latex="\\RightLabel{R}" semantics="bspr_axiom:true">\n                  <mspace width=".5ex"></mspace>\n                  <mstyle displaystyle="false" scriptlevel="0">\n                    <mtext>A</mtext>\n                  </mstyle>\n                  <mspace width=".5ex"></mspace>\n                </mrow>\n              </mtd>\n            </mtr>\n          </mtable>\n        </mtd>\n      </mtr>\n      <mtr>\n        <mtd>\n          <mrow>\n            <mspace width=".5ex"></mspace>\n            <mstyle displaystyle="false" scriptlevel="0">\n              <mtext>B</mtext>\n            </mstyle>\n            <mspace width=".5ex"></mspace>\n          </mrow>\n        </mtd>\n      </mtr>\n    </mtable>\n    <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n      <mstyle displaystyle="false" scriptlevel="0">\n        <mtext>R</mtext>\n      </mstyle>\n    </mpadded>\n  </mrow>\n</math>'
    ));
  it('Single Axiom Abbr', () =>
    toXmlMatch(
      tex2mml('\\begin{prooftree}\\AXC{A}\\end{prooftree}'),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AXC{A}\\end{prooftree}" display="block">\n  <mrow data-latex="\\begin{prooftree}\\AXC{A}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_axiom:true;bspr_proof:true">\n    <mspace width=".5ex"></mspace>\n    <mstyle displaystyle="false" scriptlevel="0">\n      <mtext>A</mtext>\n    </mstyle>\n    <mspace width=".5ex"></mspace>\n  </mrow>\n</math>'
    ));
  it('Unary Inference Abbr', () =>
    toXmlMatch(
      tex2mml('\\begin{prooftree}\\AXC{A}\\UIC{B}\\end{prooftree}'),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AXC{A}\\UIC{B}\\end{prooftree}" display="block">\n  <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\begin{prooftree}\\AXC{A}\\UIC{B}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_inferenceRule:down;bspr_inference:1;bspr_proof:true">\n    <mtr>\n      <mtd>\n        <mtable framespacing="0 0">\n          <mtr>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AXC{A}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>A</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n          </mtr>\n        </mtable>\n      </mtd>\n    </mtr>\n    <mtr>\n      <mtd>\n        <mrow>\n          <mspace width=".5ex"></mspace>\n          <mstyle displaystyle="false" scriptlevel="0">\n            <mtext>B</mtext>\n          </mstyle>\n          <mspace width=".5ex"></mspace>\n        </mrow>\n      </mtd>\n    </mtr>\n  </mtable>\n</math>'
    ));
  it('Binary Inference Abbr', () =>
    toXmlMatch(
      tex2mml('\\begin{prooftree}\\AXC{A}\\AXC{B}\\BIC{C}\\end{prooftree}'),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AXC{A}\\AXC{B}\\BIC{C}\\end{prooftree}" display="block">\n  <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\begin{prooftree}\\AXC{A}\\AXC{B}\\BIC{C}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_inferenceRule:down;bspr_inference:2;bspr_proof:true">\n    <mtr>\n      <mtd>\n        <mtable framespacing="0 0">\n          <mtr>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AXC{A}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>A</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n            <mtd></mtd>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AXC{B}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>B</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n          </mtr>\n        </mtable>\n      </mtd>\n    </mtr>\n    <mtr>\n      <mtd>\n        <mrow>\n          <mspace width=".5ex"></mspace>\n          <mstyle displaystyle="false" scriptlevel="0">\n            <mtext>C</mtext>\n          </mstyle>\n          <mspace width=".5ex"></mspace>\n        </mrow>\n      </mtd>\n    </mtr>\n  </mtable>\n</math>'
    ));
  it('Trinary Inference Abbr', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AXC{A}\\AXC{B}\\AXC{C}\\TIC{D}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AXC{A}\\AXC{B}\\AXC{C}\\TIC{D}\\end{prooftree}" display="block">\n  <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\begin{prooftree}\\AXC{A}\\AXC{B}\\AXC{C}\\TIC{D}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_inferenceRule:down;bspr_inference:3;bspr_proof:true">\n    <mtr>\n      <mtd>\n        <mtable framespacing="0 0">\n          <mtr>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AXC{A}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>A</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n            <mtd></mtd>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AXC{B}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>B</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n            <mtd></mtd>\n            <mtd rowalign="bottom">\n              <mrow data-latex="\\AXC{C}" semantics="bspr_axiom:true">\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mtext>C</mtext>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n          </mtr>\n        </mtable>\n      </mtd>\n    </mtr>\n    <mtr>\n      <mtd>\n        <mrow>\n          <mspace width=".5ex"></mspace>\n          <mstyle displaystyle="false" scriptlevel="0">\n            <mtext>D</mtext>\n          </mstyle>\n          <mspace width=".5ex"></mspace>\n        </mrow>\n      </mtd>\n    </mtr>\n  </mtable>\n</math>'
    ));
  it('Label Left Abbr', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AXC{A}\\LeftLabel{L}\\UIC{B}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AXC{A}\\LeftLabel{L}\\UIC{B}\\end{prooftree}" display="block">\n  <mrow data-latex="\\begin{prooftree}\\AXC{A}\\LeftLabel{L}\\UIC{B}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_labelledRule:left;bspr_inference:1;bspr_proof:true">\n    <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n      <mstyle displaystyle="false" scriptlevel="0">\n        <mtext>L</mtext>\n      </mstyle>\n    </mpadded>\n    <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n      <mtr>\n        <mtd>\n          <mtable framespacing="0 0">\n            <mtr>\n              <mtd rowalign="bottom">\n                <mrow data-latex="\\LeftLabel{L}" semantics="bspr_axiom:true">\n                  <mspace width=".5ex"></mspace>\n                  <mstyle displaystyle="false" scriptlevel="0">\n                    <mtext>A</mtext>\n                  </mstyle>\n                  <mspace width=".5ex"></mspace>\n                </mrow>\n              </mtd>\n            </mtr>\n          </mtable>\n        </mtd>\n      </mtr>\n      <mtr>\n        <mtd>\n          <mrow>\n            <mspace width=".5ex"></mspace>\n            <mstyle displaystyle="false" scriptlevel="0">\n              <mtext>B</mtext>\n            </mstyle>\n            <mspace width=".5ex"></mspace>\n          </mrow>\n        </mtd>\n      </mtr>\n    </mtable>\n  </mrow>\n</math>'
    ));
  it('Label Right Abbr', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AXC{A}\\RightLabel{R}\\UIC{B}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AXC{A}\\RightLabel{R}\\UIC{B}\\end{prooftree}" display="block">\n  <mrow data-latex="\\begin{prooftree}\\AXC{A}\\RightLabel{R}\\UIC{B}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_labelledRule:right;bspr_inference:1;bspr_proof:true">\n    <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n      <mtr>\n        <mtd>\n          <mtable framespacing="0 0">\n            <mtr>\n              <mtd rowalign="bottom">\n                <mrow data-latex="\\RightLabel{R}" semantics="bspr_axiom:true">\n                  <mspace width=".5ex"></mspace>\n                  <mstyle displaystyle="false" scriptlevel="0">\n                    <mtext>A</mtext>\n                  </mstyle>\n                  <mspace width=".5ex"></mspace>\n                </mrow>\n              </mtd>\n            </mtr>\n          </mtable>\n        </mtd>\n      </mtr>\n      <mtr>\n        <mtd>\n          <mrow>\n            <mspace width=".5ex"></mspace>\n            <mstyle displaystyle="false" scriptlevel="0">\n              <mtext>B</mtext>\n            </mstyle>\n            <mspace width=".5ex"></mspace>\n          </mrow>\n        </mtd>\n      </mtr>\n    </mtable>\n    <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n      <mstyle displaystyle="false" scriptlevel="0">\n        <mtext>R</mtext>\n      </mstyle>\n    </mpadded>\n  </mrow>\n</math>'
    ));
  it('Label Both Abbr', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AXC{A}\\LeftLabel{L}\\RightLabel{R}\\UIC{B}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AXC{A}\\LeftLabel{L}\\RightLabel{R}\\UIC{B}\\end{prooftree}" display="block">\n  <mrow data-latex="\\begin{prooftree}\\AXC{A}\\LeftLabel{L}\\RightLabel{R}\\UIC{B}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_labelledRule:both;bspr_inference:1;bspr_proof:true">\n    <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n      <mstyle displaystyle="false" scriptlevel="0">\n        <mtext>L</mtext>\n      </mstyle>\n    </mpadded>\n    <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n      <mtr>\n        <mtd>\n          <mtable framespacing="0 0">\n            <mtr>\n              <mtd rowalign="bottom">\n                <mrow data-latex="\\RightLabel{R}" semantics="bspr_axiom:true">\n                  <mspace width=".5ex"></mspace>\n                  <mstyle displaystyle="false" scriptlevel="0">\n                    <mtext>A</mtext>\n                  </mstyle>\n                  <mspace width=".5ex"></mspace>\n                </mrow>\n              </mtd>\n            </mtr>\n          </mtable>\n        </mtd>\n      </mtr>\n      <mtr>\n        <mtd>\n          <mrow>\n            <mspace width=".5ex"></mspace>\n            <mstyle displaystyle="false" scriptlevel="0">\n              <mtext>B</mtext>\n            </mstyle>\n            <mspace width=".5ex"></mspace>\n          </mrow>\n        </mtd>\n      </mtr>\n    </mtable>\n    <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n      <mstyle displaystyle="false" scriptlevel="0">\n        <mtext>R</mtext>\n      </mstyle>\n    </mpadded>\n  </mrow>\n</math>'
    ));
});

describe('BussproofsRegProofs', () => {
  it('Simple Proof', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{D}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\BinaryInfC{E}\\BinaryInfC{F}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\BinaryInfC{E}\\BinaryInfC{F}\\end{prooftree}" display="block">\n  <mrow semantics="bspr_inference:2;bspr_proof:true">\n    <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\BinaryInfC{E}\\BinaryInfC{F}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_inferenceRule:down">\n      <mtr>\n        <mtd>\n          <mtable framespacing="0 0">\n            <mtr>\n              <mtd rowalign="bottom">\n                <mrow data-latex="\\AxiomC{D}" semantics="bspr_axiom:true">\n                  <mspace width=".5ex"></mspace>\n                  <mstyle displaystyle="false" scriptlevel="0">\n                    <mtext>D</mtext>\n                  </mstyle>\n                  <mspace width=".5ex"></mspace>\n                </mrow>\n              </mtd>\n              <mtd></mtd>\n              <mtd rowalign="bottom">\n                <mrow semantics="bspr_inference:2">\n                  <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\BinaryInfC{E}" semantics="bspr_inferenceRule:down">\n                    <mtr>\n                      <mtd>\n                        <mtable framespacing="0 0">\n                          <mtr>\n                            <mtd rowalign="bottom">\n                              <mrow data-latex="\\AxiomC{A}" semantics="bspr_axiom:true">\n                                <mspace width=".5ex"></mspace>\n                                <mstyle displaystyle="false" scriptlevel="0">\n                                  <mtext>A</mtext>\n                                </mstyle>\n                                <mspace width=".5ex"></mspace>\n                              </mrow>\n                            </mtd>\n                            <mtd></mtd>\n                            <mtd rowalign="bottom">\n                              <mrow semantics="bspr_inference:2">\n                                <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}" semantics="bspr_inferenceRule:down">\n                                  <mtr>\n                                    <mtd>\n                                      <mtable framespacing="0 0">\n                                        <mtr>\n                                          <mtd rowalign="bottom">\n                                            <mrow data-latex="\\AxiomC{B}" semantics="bspr_axiom:true">\n                                              <mspace width=".5ex"></mspace>\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>B</mtext>\n                                              </mstyle>\n                                              <mspace width=".5ex"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                          <mtd></mtd>\n                                          <mtd rowalign="bottom">\n                                            <mrow data-latex="\\AxiomC{R}" semantics="bspr_axiom:true">\n                                              <mspace width=".5ex"></mspace>\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>R</mtext>\n                                              </mstyle>\n                                              <mspace width=".5ex"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                        </mtr>\n                                      </mtable>\n                                    </mtd>\n                                  </mtr>\n                                  <mtr>\n                                    <mtd>\n                                      <mrow>\n                                        <mspace width=".5ex"></mspace>\n                                        <mstyle displaystyle="false" scriptlevel="0">\n                                          <mrow data-mjx-texclass="ORD">\n                                            <mi data-latex="C">C</mi>\n                                            <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                            <mi data-latex="D">D</mi>\n                                            <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                            <mi data-latex="Q">Q</mi>\n                                          </mrow>\n                                        </mstyle>\n                                        <mspace width=".5ex"></mspace>\n                                      </mrow>\n                                    </mtd>\n                                  </mtr>\n                                </mtable>\n                                <mspace width="0em"></mspace>\n                              </mrow>\n                            </mtd>\n                          </mtr>\n                        </mtable>\n                      </mtd>\n                    </mtr>\n                    <mtr>\n                      <mtd>\n                        <mrow>\n                          <mspace width=".5ex"></mspace>\n                          <mstyle displaystyle="false" scriptlevel="0">\n                            <mtext>E</mtext>\n                          </mstyle>\n                          <mspace width=".5ex"></mspace>\n                        </mrow>\n                      </mtd>\n                    </mtr>\n                  </mtable>\n                  <mspace width="-3.795em"></mspace>\n                </mrow>\n              </mtd>\n            </mtr>\n          </mtable>\n        </mtd>\n      </mtr>\n      <mtr>\n        <mtd>\n          <mrow>\n            <mspace width=".5ex"></mspace>\n            <mstyle displaystyle="false" scriptlevel="0">\n              <mtext>F</mtext>\n            </mstyle>\n            <mspace width=".5ex"></mspace>\n          </mrow>\n        </mtd>\n      </mtr>\n    </mtable>\n    <mspace width="3.795em"></mspace>\n  </mrow>\n</math>'
    ));
  it('Simple Proof Noise', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{D}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}$\\alpha$\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\BinaryInfC{E}\\BinaryInfC{F}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}$\\alpha$\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\BinaryInfC{E}\\BinaryInfC{F}\\end{prooftree}" display="block">\n  <mrow data-latex-item="{prooftree}" data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}$\\alpha$\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\BinaryInfC{E}\\BinaryInfC{F}\\end{prooftree}" semantics="bspr_proof:true">\n    <mrow data-mjx-texclass="ORD">\n      <mo>$</mo>\n    </mrow>\n    <mi>&#x3B1;</mi>\n    <mrow data-mjx-texclass="ORD">\n      <mo>$</mo>\n    </mrow>\n    <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\BinaryInfC{F}" semantics="bspr_inferenceRule:down;bspr_inference:2">\n      <mtr>\n        <mtd>\n          <mtable framespacing="0 0">\n            <mtr>\n              <mtd rowalign="bottom">\n                <mrow data-latex="\\AxiomC{D}" semantics="bspr_axiom:true">\n                  <mspace width=".5ex"></mspace>\n                  <mstyle displaystyle="false" scriptlevel="0">\n                    <mtext>D</mtext>\n                  </mstyle>\n                  <mspace width=".5ex"></mspace>\n                </mrow>\n              </mtd>\n              <mtd></mtd>\n              <mtd rowalign="bottom">\n                <mrow semantics="bspr_inference:2">\n                  <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\BinaryInfC{E}" semantics="bspr_inferenceRule:down">\n                    <mtr>\n                      <mtd>\n                        <mtable framespacing="0 0">\n                          <mtr>\n                            <mtd rowalign="bottom">\n                              <mrow data-latex="\\AxiomC{A}" semantics="bspr_axiom:true">\n                                <mspace width=".5ex"></mspace>\n                                <mstyle displaystyle="false" scriptlevel="0">\n                                  <mtext>A</mtext>\n                                </mstyle>\n                                <mspace width=".5ex"></mspace>\n                              </mrow>\n                            </mtd>\n                            <mtd></mtd>\n                            <mtd rowalign="bottom">\n                              <mrow semantics="bspr_inference:2">\n                                <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}" semantics="bspr_inferenceRule:down">\n                                  <mtr>\n                                    <mtd>\n                                      <mtable framespacing="0 0">\n                                        <mtr>\n                                          <mtd rowalign="bottom">\n                                            <mrow data-latex="\\AxiomC{B}" semantics="bspr_axiom:true">\n                                              <mspace width=".5ex"></mspace>\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>B</mtext>\n                                              </mstyle>\n                                              <mspace width=".5ex"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                          <mtd></mtd>\n                                          <mtd rowalign="bottom">\n                                            <mrow data-latex="$" semantics="bspr_axiom:true">\n                                              <mspace width=".5ex"></mspace>\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>R</mtext>\n                                              </mstyle>\n                                              <mspace width=".5ex"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                        </mtr>\n                                      </mtable>\n                                    </mtd>\n                                  </mtr>\n                                  <mtr>\n                                    <mtd>\n                                      <mrow>\n                                        <mspace width=".5ex"></mspace>\n                                        <mstyle displaystyle="false" scriptlevel="0">\n                                          <mrow data-mjx-texclass="ORD">\n                                            <mi data-latex="C">C</mi>\n                                            <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                            <mi data-latex="D">D</mi>\n                                            <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                            <mi data-latex="Q">Q</mi>\n                                          </mrow>\n                                        </mstyle>\n                                        <mspace width=".5ex"></mspace>\n                                      </mrow>\n                                    </mtd>\n                                  </mtr>\n                                </mtable>\n                                <mspace width="0em"></mspace>\n                              </mrow>\n                            </mtd>\n                          </mtr>\n                        </mtable>\n                      </mtd>\n                    </mtr>\n                    <mtr>\n                      <mtd>\n                        <mrow>\n                          <mspace width=".5ex"></mspace>\n                          <mstyle displaystyle="false" scriptlevel="0">\n                            <mtext>E</mtext>\n                          </mstyle>\n                          <mspace width=".5ex"></mspace>\n                        </mrow>\n                      </mtd>\n                    </mtr>\n                  </mtable>\n                  <mspace width="-3.795em"></mspace>\n                </mrow>\n              </mtd>\n            </mtr>\n          </mtable>\n        </mtd>\n      </mtr>\n      <mtr>\n        <mtd>\n          <mrow>\n            <mspace width=".5ex"></mspace>\n            <mstyle displaystyle="false" scriptlevel="0">\n              <mtext>F</mtext>\n            </mstyle>\n            <mspace width=".5ex"></mspace>\n          </mrow>\n        </mtd>\n      </mtr>\n    </mtable>\n    <mspace width="3.795em"></mspace>\n  </mrow>\n</math>'
    ));
  it('Simple Proof Large', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\BinaryInfC{E}\\BinaryInfC{F}\\AxiomC{M}\\BinaryInfC{$N \\rightarrow R$}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\BinaryInfC{E}\\BinaryInfC{F}\\AxiomC{M}\\BinaryInfC{$N \\rightarrow R$}\\end{prooftree}" display="block">\n  <mrow semantics="bspr_inference:2;bspr_proof:true">\n    <mspace width="8.227em"></mspace>\n    <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\BinaryInfC{E}\\BinaryInfC{F}\\AxiomC{M}\\BinaryInfC{$N \\rightarrow R$}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_inferenceRule:down">\n      <mtr>\n        <mtd>\n          <mtable framespacing="0 0">\n            <mtr>\n              <mtd rowalign="bottom">\n                <mrow semantics="bspr_inference:2">\n                  <mspace width="-4.953em"></mspace>\n                  <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\BinaryInfC{F}" semantics="bspr_inferenceRule:down">\n                    <mtr>\n                      <mtd>\n                        <mtable framespacing="0 0">\n                          <mtr>\n                            <mtd rowalign="bottom">\n                              <mrow semantics="bspr_inference:3">\n                                <mspace width="-3.274em"></mspace>\n                                <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\TrinaryInfC{Q}" semantics="bspr_inferenceRule:down">\n                                  <mtr>\n                                    <mtd>\n                                      <mtable framespacing="0 0">\n                                        <mtr>\n                                          <mtd rowalign="bottom">\n                                            <mrow data-latex="\\AxiomC{D}" semantics="bspr_axiom:true">\n                                              <mspace width=".5ex"></mspace>\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>D</mtext>\n                                              </mstyle>\n                                              <mspace width=".5ex"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                          <mtd></mtd>\n                                          <mtd rowalign="bottom">\n                                            <mrow data-latex="\\AxiomC{A1}" semantics="bspr_axiom:true">\n                                              <mspace width=".5ex"></mspace>\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>A1</mtext>\n                                              </mstyle>\n                                              <mspace width=".5ex"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                          <mtd></mtd>\n                                          <mtd rowalign="bottom">\n                                            <mrow data-latex="\\AxiomC{A2}" semantics="bspr_axiom:true">\n                                              <mspace width=".5ex"></mspace>\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>A2</mtext>\n                                              </mstyle>\n                                              <mspace width=".5ex"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                        </mtr>\n                                      </mtable>\n                                    </mtd>\n                                  </mtr>\n                                  <mtr>\n                                    <mtd>\n                                      <mrow>\n                                        <mspace width=".5ex"></mspace>\n                                        <mstyle displaystyle="false" scriptlevel="0">\n                                          <mtext>Q</mtext>\n                                        </mstyle>\n                                        <mspace width=".5ex"></mspace>\n                                      </mrow>\n                                    </mtd>\n                                  </mtr>\n                                </mtable>\n                              </mrow>\n                            </mtd>\n                            <mtd></mtd>\n                            <mtd rowalign="bottom">\n                              <mrow semantics="bspr_inference:2">\n                                <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\BinaryInfC{E}" semantics="bspr_inferenceRule:down">\n                                  <mtr>\n                                    <mtd>\n                                      <mtable framespacing="0 0">\n                                        <mtr>\n                                          <mtd rowalign="bottom">\n                                            <mrow data-latex="\\AxiomC{A}" semantics="bspr_axiom:true">\n                                              <mspace width=".5ex"></mspace>\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>A</mtext>\n                                              </mstyle>\n                                              <mspace width=".5ex"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                          <mtd></mtd>\n                                          <mtd rowalign="bottom">\n                                            <mrow semantics="bspr_inference:2">\n                                              <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}" semantics="bspr_inferenceRule:down">\n                                                <mtr>\n                                                  <mtd>\n                                                    <mtable framespacing="0 0">\n                                                      <mtr>\n                                                        <mtd rowalign="bottom">\n                                                          <mrow data-latex="\\AxiomC{B}" semantics="bspr_axiom:true">\n                                                            <mspace width=".5ex"></mspace>\n                                                            <mstyle displaystyle="false" scriptlevel="0">\n                                                              <mtext>B</mtext>\n                                                            </mstyle>\n                                                            <mspace width=".5ex"></mspace>\n                                                          </mrow>\n                                                        </mtd>\n                                                        <mtd></mtd>\n                                                        <mtd rowalign="bottom">\n                                                          <mrow data-latex="\\AxiomC{R}" semantics="bspr_axiom:true">\n                                                            <mspace width=".5ex"></mspace>\n                                                            <mstyle displaystyle="false" scriptlevel="0">\n                                                              <mtext>R</mtext>\n                                                            </mstyle>\n                                                            <mspace width=".5ex"></mspace>\n                                                          </mrow>\n                                                        </mtd>\n                                                      </mtr>\n                                                    </mtable>\n                                                  </mtd>\n                                                </mtr>\n                                                <mtr>\n                                                  <mtd>\n                                                    <mrow>\n                                                      <mspace width=".5ex"></mspace>\n                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                        <mrow data-mjx-texclass="ORD">\n                                                          <mi data-latex="C">C</mi>\n                                                          <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                          <mi data-latex="D">D</mi>\n                                                          <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                          <mi data-latex="Q">Q</mi>\n                                                        </mrow>\n                                                      </mstyle>\n                                                      <mspace width=".5ex"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                </mtr>\n                                              </mtable>\n                                              <mspace width="0em"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                        </mtr>\n                                      </mtable>\n                                    </mtd>\n                                  </mtr>\n                                  <mtr>\n                                    <mtd>\n                                      <mrow>\n                                        <mspace width=".5ex"></mspace>\n                                        <mstyle displaystyle="false" scriptlevel="0">\n                                          <mtext>E</mtext>\n                                        </mstyle>\n                                        <mspace width=".5ex"></mspace>\n                                      </mrow>\n                                    </mtd>\n                                  </mtr>\n                                </mtable>\n                                <mspace width="-3.795em"></mspace>\n                              </mrow>\n                            </mtd>\n                          </mtr>\n                        </mtable>\n                      </mtd>\n                    </mtr>\n                    <mtr>\n                      <mtd>\n                        <mrow>\n                          <mspace width=".5ex"></mspace>\n                          <mstyle displaystyle="false" scriptlevel="0">\n                            <mtext>F</mtext>\n                          </mstyle>\n                          <mspace width=".5ex"></mspace>\n                        </mrow>\n                      </mtd>\n                    </mtr>\n                  </mtable>\n                </mrow>\n              </mtd>\n              <mtd>\n                <mspace width="3.795055555555555em"></mspace>\n              </mtd>\n              <mtd rowalign="bottom">\n                <mrow data-latex="\\AxiomC{M}" semantics="bspr_axiom:true">\n                  <mspace width=".5ex"></mspace>\n                  <mstyle displaystyle="false" scriptlevel="0">\n                    <mtext>M</mtext>\n                  </mstyle>\n                  <mspace width=".5ex"></mspace>\n                </mrow>\n              </mtd>\n            </mtr>\n          </mtable>\n        </mtd>\n      </mtr>\n      <mtr>\n        <mtd>\n          <mrow>\n            <mspace width=".5ex"></mspace>\n            <mstyle displaystyle="false" scriptlevel="0">\n              <mrow data-mjx-texclass="ORD">\n                <mi data-latex="N">N</mi>\n                <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                <mi data-latex="R">R</mi>\n              </mrow>\n            </mstyle>\n            <mspace width=".5ex"></mspace>\n          </mrow>\n        </mtd>\n      </mtr>\n    </mtable>\n  </mrow>\n</math>'
    ));
  it('Simple Proofs Right Labels', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\RightLabel{AAAA}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\RightLabel{BBB}\\BinaryInfC{E}\\RightLabel{CCCCC}\\BinaryInfC{F}\\RightLabel{QERE}\\AxiomC{M}\\BinaryInfC{$N \\rightarrow R$}\\RightLabel{Nowhere}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\RightLabel{AAAA}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\RightLabel{BBB}\\BinaryInfC{E}\\RightLabel{CCCCC}\\BinaryInfC{F}\\RightLabel{QERE}\\AxiomC{M}\\BinaryInfC{$N \\rightarrow R$}\\RightLabel{Nowhere}\\end{prooftree}" display="block">\n  <mrow semantics="bspr_inference:2;bspr_proof:true;bspr_labelledRule:right">\n    <mspace width="8.227em"></mspace>\n    <mrow data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\RightLabel{AAAA}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\RightLabel{BBB}\\BinaryInfC{E}\\RightLabel{CCCCC}\\BinaryInfC{F}\\RightLabel{QERE}\\AxiomC{M}\\BinaryInfC{$N \\rightarrow R$}\\RightLabel{Nowhere}\\end{prooftree}" data-latex-item="{prooftree}">\n      <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n        <mtr>\n          <mtd>\n            <mtable framespacing="0 0">\n              <mtr>\n                <mtd rowalign="bottom">\n                  <mrow semantics="bspr_inference:2;bspr_labelledRule:right">\n                    <mspace width="-8.227em"></mspace>\n                    <mrow>\n                      <mspace width="3.274em"></mspace>\n                      <mrow data-latex="\\RightLabel{QERE}">\n                        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                          <mtr>\n                            <mtd>\n                              <mtable framespacing="0 0">\n                                <mtr>\n                                  <mtd rowalign="bottom">\n                                    <mrow semantics="bspr_inference:3">\n                                      <mspace width="-3.274em"></mspace>\n                                      <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\RightLabel{AAAA}" semantics="bspr_inferenceRule:down">\n                                        <mtr>\n                                          <mtd>\n                                            <mtable framespacing="0 0">\n                                              <mtr>\n                                                <mtd rowalign="bottom">\n                                                  <mrow data-latex="\\AxiomC{D}" semantics="bspr_axiom:true">\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mtext>D</mtext>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                                <mtd></mtd>\n                                                <mtd rowalign="bottom">\n                                                  <mrow data-latex="\\AxiomC{A1}" semantics="bspr_axiom:true">\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mtext>A1</mtext>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                                <mtd></mtd>\n                                                <mtd rowalign="bottom">\n                                                  <mrow data-latex="\\AxiomC{A2}" semantics="bspr_axiom:true">\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mtext>A2</mtext>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                              </mtr>\n                                            </mtable>\n                                          </mtd>\n                                        </mtr>\n                                        <mtr>\n                                          <mtd>\n                                            <mrow>\n                                              <mspace width=".5ex"></mspace>\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>Q</mtext>\n                                              </mstyle>\n                                              <mspace width=".5ex"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                        </mtr>\n                                      </mtable>\n                                    </mrow>\n                                  </mtd>\n                                  <mtd></mtd>\n                                  <mtd rowalign="bottom">\n                                    <mrow semantics="bspr_inference:2;bspr_labelledRule:right">\n                                      <mrow data-latex="\\RightLabel{CCCCC}">\n                                        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                          <mtr>\n                                            <mtd>\n                                              <mtable framespacing="0 0">\n                                                <mtr>\n                                                  <mtd rowalign="bottom">\n                                                    <mrow data-latex="\\AxiomC{A}" semantics="bspr_axiom:true">\n                                                      <mspace width=".5ex"></mspace>\n                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                        <mtext>A</mtext>\n                                                      </mstyle>\n                                                      <mspace width=".5ex"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                  <mtd></mtd>\n                                                  <mtd rowalign="bottom">\n                                                    <mrow semantics="bspr_inference:2;bspr_labelledRule:right">\n                                                      <mrow data-latex="\\RightLabel{BBB}">\n                                                        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                                          <mtr>\n                                                            <mtd>\n                                                              <mtable framespacing="0 0">\n                                                                <mtr>\n                                                                  <mtd rowalign="bottom">\n                                                                    <mrow data-latex="\\AxiomC{B}" semantics="bspr_axiom:true">\n                                                                      <mspace width=".5ex"></mspace>\n                                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                                        <mtext>B</mtext>\n                                                                      </mstyle>\n                                                                      <mspace width=".5ex"></mspace>\n                                                                    </mrow>\n                                                                  </mtd>\n                                                                  <mtd></mtd>\n                                                                  <mtd rowalign="bottom">\n                                                                    <mrow data-latex="\\AxiomC{R}" semantics="bspr_axiom:true">\n                                                                      <mspace width=".5ex"></mspace>\n                                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                                        <mtext>R</mtext>\n                                                                      </mstyle>\n                                                                      <mspace width=".5ex"></mspace>\n                                                                    </mrow>\n                                                                  </mtd>\n                                                                </mtr>\n                                                              </mtable>\n                                                            </mtd>\n                                                          </mtr>\n                                                          <mtr>\n                                                            <mtd>\n                                                              <mrow>\n                                                                <mspace width=".5ex"></mspace>\n                                                                <mstyle displaystyle="false" scriptlevel="0">\n                                                                  <mrow data-mjx-texclass="ORD">\n                                                                    <mi data-latex="C">C</mi>\n                                                                    <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                    <mi data-latex="D">D</mi>\n                                                                    <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                    <mi data-latex="Q">Q</mi>\n                                                                  </mrow>\n                                                                </mstyle>\n                                                                <mspace width=".5ex"></mspace>\n                                                              </mrow>\n                                                            </mtd>\n                                                          </mtr>\n                                                        </mtable>\n                                                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                                          <mstyle displaystyle="false" scriptlevel="0">\n                                                            <mtext>AAAA</mtext>\n                                                          </mstyle>\n                                                        </mpadded>\n                                                      </mrow>\n                                                      <mspace width="-3.5em"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                </mtr>\n                                              </mtable>\n                                            </mtd>\n                                          </mtr>\n                                          <mtr>\n                                            <mtd>\n                                              <mrow>\n                                                <mspace width=".5ex"></mspace>\n                                                <mstyle displaystyle="false" scriptlevel="0">\n                                                  <mtext>E</mtext>\n                                                </mstyle>\n                                                <mspace width=".5ex"></mspace>\n                                              </mrow>\n                                            </mtd>\n                                          </mtr>\n                                        </mtable>\n                                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                          <mstyle displaystyle="false" scriptlevel="0">\n                                            <mtext>BBB</mtext>\n                                          </mstyle>\n                                        </mpadded>\n                                      </mrow>\n                                      <mspace width="-6.419em"></mspace>\n                                    </mrow>\n                                  </mtd>\n                                </mtr>\n                              </mtable>\n                            </mtd>\n                          </mtr>\n                          <mtr>\n                            <mtd>\n                              <mrow>\n                                <mspace width=".5ex"></mspace>\n                                <mstyle displaystyle="false" scriptlevel="0">\n                                  <mtext>F</mtext>\n                                </mstyle>\n                                <mspace width=".5ex"></mspace>\n                              </mrow>\n                            </mtd>\n                          </mtr>\n                        </mtable>\n                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                          <mstyle displaystyle="false" scriptlevel="0">\n                            <mtext>CCCCC</mtext>\n                          </mstyle>\n                        </mpadded>\n                      </mrow>\n                    </mrow>\n                  </mrow>\n                </mtd>\n                <mtd>\n                  <mspace width="2.309055555555555em"></mspace>\n                </mtd>\n                <mtd rowalign="bottom">\n                  <mrow data-latex="\\AxiomC{M}" semantics="bspr_axiom:true">\n                    <mspace width=".5ex"></mspace>\n                    <mstyle displaystyle="false" scriptlevel="0">\n                      <mtext>M</mtext>\n                    </mstyle>\n                    <mspace width=".5ex"></mspace>\n                  </mrow>\n                </mtd>\n              </mtr>\n            </mtable>\n          </mtd>\n        </mtr>\n        <mtr>\n          <mtd>\n            <mrow>\n              <mspace width=".5ex"></mspace>\n              <mstyle displaystyle="false" scriptlevel="0">\n                <mrow data-mjx-texclass="ORD">\n                  <mi data-latex="N">N</mi>\n                  <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                  <mi data-latex="R">R</mi>\n                </mrow>\n              </mstyle>\n              <mspace width=".5ex"></mspace>\n            </mrow>\n          </mtd>\n        </mtr>\n      </mtable>\n      <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n        <mstyle displaystyle="false" scriptlevel="0">\n          <mtext>QERE</mtext>\n        </mstyle>\n      </mpadded>\n    </mrow>\n  </mrow>\n</math>'
    ));
  it('Simple Proofs Left Labels', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\LeftLabel{AAAA}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\LeftLabel{BBB}\\BinaryInfC{E}\\LeftLabel{CCCCC}\\BinaryInfC{F}\\LeftLabel{QERE}\\AxiomC{M}\\BinaryInfC{$N \\rightarrow R$}\\LeftLabel{Nowhere}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\LeftLabel{AAAA}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\LeftLabel{BBB}\\BinaryInfC{E}\\LeftLabel{CCCCC}\\BinaryInfC{F}\\LeftLabel{QERE}\\AxiomC{M}\\BinaryInfC{$N \\rightarrow R$}\\LeftLabel{Nowhere}\\end{prooftree}" display="block">\n  <mrow semantics="bspr_inference:2;bspr_proof:true;bspr_labelledRule:left">\n    <mspace width="7.038em"></mspace>\n    <mrow data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\LeftLabel{AAAA}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\LeftLabel{BBB}\\BinaryInfC{E}\\LeftLabel{CCCCC}\\BinaryInfC{F}\\LeftLabel{QERE}\\AxiomC{M}\\BinaryInfC{$N \\rightarrow R$}\\LeftLabel{Nowhere}\\end{prooftree}" data-latex-item="{prooftree}">\n      <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n        <mstyle displaystyle="false" scriptlevel="0">\n          <mtext>QERE</mtext>\n        </mstyle>\n      </mpadded>\n      <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n        <mtr>\n          <mtd>\n            <mtable framespacing="0 0">\n              <mtr>\n                <mtd rowalign="bottom">\n                  <mrow semantics="bspr_inference:2;bspr_labelledRule:left">\n                    <mspace width="-10.414em"></mspace>\n                    <mrow>\n                      <mspace width="-0.836em"></mspace>\n                      <mrow data-latex="\\LeftLabel{QERE}">\n                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n                          <mstyle displaystyle="false" scriptlevel="0">\n                            <mtext>CCCCC</mtext>\n                          </mstyle>\n                        </mpadded>\n                        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                          <mtr>\n                            <mtd>\n                              <mtable framespacing="0 0">\n                                <mtr>\n                                  <mtd rowalign="bottom">\n                                    <mrow semantics="bspr_inference:3">\n                                      <mspace width="-3.274em"></mspace>\n                                      <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\LeftLabel{AAAA}" semantics="bspr_inferenceRule:down">\n                                        <mtr>\n                                          <mtd>\n                                            <mtable framespacing="0 0">\n                                              <mtr>\n                                                <mtd rowalign="bottom">\n                                                  <mrow data-latex="\\AxiomC{D}" semantics="bspr_axiom:true">\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mtext>D</mtext>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                                <mtd></mtd>\n                                                <mtd rowalign="bottom">\n                                                  <mrow data-latex="\\AxiomC{A1}" semantics="bspr_axiom:true">\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mtext>A1</mtext>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                                <mtd></mtd>\n                                                <mtd rowalign="bottom">\n                                                  <mrow data-latex="\\AxiomC{A2}" semantics="bspr_axiom:true">\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mtext>A2</mtext>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                              </mtr>\n                                            </mtable>\n                                          </mtd>\n                                        </mtr>\n                                        <mtr>\n                                          <mtd>\n                                            <mrow>\n                                              <mspace width=".5ex"></mspace>\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>Q</mtext>\n                                              </mstyle>\n                                              <mspace width=".5ex"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                        </mtr>\n                                      </mtable>\n                                    </mrow>\n                                  </mtd>\n                                  <mtd></mtd>\n                                  <mtd rowalign="bottom">\n                                    <mrow semantics="bspr_inference:2;bspr_labelledRule:left">\n                                      <mrow data-latex="\\LeftLabel{CCCCC}">\n                                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n                                          <mstyle displaystyle="false" scriptlevel="0">\n                                            <mtext>BBB</mtext>\n                                          </mstyle>\n                                        </mpadded>\n                                        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                          <mtr>\n                                            <mtd>\n                                              <mtable framespacing="0 0">\n                                                <mtr>\n                                                  <mtd rowalign="bottom">\n                                                    <mrow data-latex="\\AxiomC{A}" semantics="bspr_axiom:true">\n                                                      <mspace width=".5ex"></mspace>\n                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                        <mtext>A</mtext>\n                                                      </mstyle>\n                                                      <mspace width=".5ex"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                  <mtd></mtd>\n                                                  <mtd rowalign="bottom">\n                                                    <mrow semantics="bspr_inference:2;bspr_labelledRule:left">\n                                                      <mrow data-latex="\\LeftLabel{BBB}">\n                                                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n                                                          <mstyle displaystyle="false" scriptlevel="0">\n                                                            <mtext>AAAA</mtext>\n                                                          </mstyle>\n                                                        </mpadded>\n                                                        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                                          <mtr>\n                                                            <mtd>\n                                                              <mtable framespacing="0 0">\n                                                                <mtr>\n                                                                  <mtd rowalign="bottom">\n                                                                    <mrow data-latex="\\AxiomC{B}" semantics="bspr_axiom:true">\n                                                                      <mspace width=".5ex"></mspace>\n                                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                                        <mtext>B</mtext>\n                                                                      </mstyle>\n                                                                      <mspace width=".5ex"></mspace>\n                                                                    </mrow>\n                                                                  </mtd>\n                                                                  <mtd></mtd>\n                                                                  <mtd rowalign="bottom">\n                                                                    <mrow data-latex="\\AxiomC{R}" semantics="bspr_axiom:true">\n                                                                      <mspace width=".5ex"></mspace>\n                                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                                        <mtext>R</mtext>\n                                                                      </mstyle>\n                                                                      <mspace width=".5ex"></mspace>\n                                                                    </mrow>\n                                                                  </mtd>\n                                                                </mtr>\n                                                              </mtable>\n                                                            </mtd>\n                                                          </mtr>\n                                                          <mtr>\n                                                            <mtd>\n                                                              <mrow>\n                                                                <mspace width=".5ex"></mspace>\n                                                                <mstyle displaystyle="false" scriptlevel="0">\n                                                                  <mrow data-mjx-texclass="ORD">\n                                                                    <mi data-latex="C">C</mi>\n                                                                    <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                    <mi data-latex="D">D</mi>\n                                                                    <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                    <mi data-latex="Q">Q</mi>\n                                                                  </mrow>\n                                                                </mstyle>\n                                                                <mspace width=".5ex"></mspace>\n                                                              </mrow>\n                                                            </mtd>\n                                                          </mtr>\n                                                        </mtable>\n                                                      </mrow>\n                                                      <mspace width="0em"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                </mtr>\n                                              </mtable>\n                                            </mtd>\n                                          </mtr>\n                                          <mtr>\n                                            <mtd>\n                                              <mrow>\n                                                <mspace width=".5ex"></mspace>\n                                                <mstyle displaystyle="false" scriptlevel="0">\n                                                  <mtext>E</mtext>\n                                                </mstyle>\n                                                <mspace width=".5ex"></mspace>\n                                              </mrow>\n                                            </mtd>\n                                          </mtr>\n                                        </mtable>\n                                      </mrow>\n                                      <mspace width="-5.545em"></mspace>\n                                    </mrow>\n                                  </mtd>\n                                </mtr>\n                              </mtable>\n                            </mtd>\n                          </mtr>\n                          <mtr>\n                            <mtd>\n                              <mrow>\n                                <mspace width=".5ex"></mspace>\n                                <mstyle displaystyle="false" scriptlevel="0">\n                                  <mtext>F</mtext>\n                                </mstyle>\n                                <mspace width=".5ex"></mspace>\n                              </mrow>\n                            </mtd>\n                          </mtr>\n                        </mtable>\n                      </mrow>\n                    </mrow>\n                  </mrow>\n                </mtd>\n                <mtd>\n                  <mspace width="5.545055555555556em"></mspace>\n                </mtd>\n                <mtd rowalign="bottom">\n                  <mrow data-latex="\\AxiomC{M}" semantics="bspr_axiom:true">\n                    <mspace width=".5ex"></mspace>\n                    <mstyle displaystyle="false" scriptlevel="0">\n                      <mtext>M</mtext>\n                    </mstyle>\n                    <mspace width=".5ex"></mspace>\n                  </mrow>\n                </mtd>\n              </mtr>\n            </mtable>\n          </mtd>\n        </mtr>\n        <mtr>\n          <mtd>\n            <mrow>\n              <mspace width=".5ex"></mspace>\n              <mstyle displaystyle="false" scriptlevel="0">\n                <mrow data-mjx-texclass="ORD">\n                  <mi data-latex="N">N</mi>\n                  <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                  <mi data-latex="R">R</mi>\n                </mrow>\n              </mstyle>\n              <mspace width=".5ex"></mspace>\n            </mrow>\n          </mtd>\n        </mtr>\n      </mtable>\n    </mrow>\n  </mrow>\n</math>'
    ));
  it('Simple Proofs Mixed Labels', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\RightLabel{AAAA}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\LeftLabel{BBB}\\BinaryInfC{E}\\LeftLabel{CCCCC}\\BinaryInfC{F}\\RightLabel{QERE}\\LeftLabel{DD}\\AxiomC{M}\\BinaryInfC{$N \\rightarrow R$}\\LeftLabel{Nowhere}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\RightLabel{AAAA}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\LeftLabel{BBB}\\BinaryInfC{E}\\LeftLabel{CCCCC}\\BinaryInfC{F}\\RightLabel{QERE}\\LeftLabel{DD}\\AxiomC{M}\\BinaryInfC{$N \\rightarrow R$}\\LeftLabel{Nowhere}\\end{prooftree}" display="block">\n  <mrow semantics="bspr_inference:2;bspr_proof:true;bspr_labelledRule:both">\n    <mspace width="7.511em"></mspace>\n    <mrow data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\RightLabel{AAAA}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\LeftLabel{BBB}\\BinaryInfC{E}\\LeftLabel{CCCCC}\\BinaryInfC{F}\\RightLabel{QERE}\\LeftLabel{DD}\\AxiomC{M}\\BinaryInfC{$N \\rightarrow R$}\\LeftLabel{Nowhere}\\end{prooftree}" data-latex-item="{prooftree}">\n      <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n        <mstyle displaystyle="false" scriptlevel="0">\n          <mtext>DD</mtext>\n        </mstyle>\n      </mpadded>\n      <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n        <mtr>\n          <mtd>\n            <mtable framespacing="0 0">\n              <mtr>\n                <mtd rowalign="bottom">\n                  <mrow semantics="bspr_inference:2;bspr_labelledRule:left">\n                    <mspace width="-9.539em"></mspace>\n                    <mrow>\n                      <mspace width="-0.836em"></mspace>\n                      <mrow data-latex="\\LeftLabel{DD}">\n                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n                          <mstyle displaystyle="false" scriptlevel="0">\n                            <mtext>CCCCC</mtext>\n                          </mstyle>\n                        </mpadded>\n                        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                          <mtr>\n                            <mtd>\n                              <mtable framespacing="0 0">\n                                <mtr>\n                                  <mtd rowalign="bottom">\n                                    <mrow semantics="bspr_inference:3">\n                                      <mspace width="-3.274em"></mspace>\n                                      <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\RightLabel{AAAA}" semantics="bspr_inferenceRule:down">\n                                        <mtr>\n                                          <mtd>\n                                            <mtable framespacing="0 0">\n                                              <mtr>\n                                                <mtd rowalign="bottom">\n                                                  <mrow data-latex="\\AxiomC{D}" semantics="bspr_axiom:true">\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mtext>D</mtext>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                                <mtd></mtd>\n                                                <mtd rowalign="bottom">\n                                                  <mrow data-latex="\\AxiomC{A1}" semantics="bspr_axiom:true">\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mtext>A1</mtext>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                                <mtd></mtd>\n                                                <mtd rowalign="bottom">\n                                                  <mrow data-latex="\\AxiomC{A2}" semantics="bspr_axiom:true">\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mtext>A2</mtext>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                              </mtr>\n                                            </mtable>\n                                          </mtd>\n                                        </mtr>\n                                        <mtr>\n                                          <mtd>\n                                            <mrow>\n                                              <mspace width=".5ex"></mspace>\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>Q</mtext>\n                                              </mstyle>\n                                              <mspace width=".5ex"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                        </mtr>\n                                      </mtable>\n                                    </mrow>\n                                  </mtd>\n                                  <mtd></mtd>\n                                  <mtd rowalign="bottom">\n                                    <mrow semantics="bspr_inference:2;bspr_labelledRule:left">\n                                      <mrow data-latex="\\LeftLabel{CCCCC}">\n                                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n                                          <mstyle displaystyle="false" scriptlevel="0">\n                                            <mtext>BBB</mtext>\n                                          </mstyle>\n                                        </mpadded>\n                                        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                          <mtr>\n                                            <mtd>\n                                              <mtable framespacing="0 0">\n                                                <mtr>\n                                                  <mtd rowalign="bottom">\n                                                    <mrow data-latex="\\AxiomC{A}" semantics="bspr_axiom:true">\n                                                      <mspace width=".5ex"></mspace>\n                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                        <mtext>A</mtext>\n                                                      </mstyle>\n                                                      <mspace width=".5ex"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                  <mtd></mtd>\n                                                  <mtd rowalign="bottom">\n                                                    <mrow semantics="bspr_inference:2;bspr_labelledRule:right">\n                                                      <mrow data-latex="\\LeftLabel{BBB}">\n                                                        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                                          <mtr>\n                                                            <mtd>\n                                                              <mtable framespacing="0 0">\n                                                                <mtr>\n                                                                  <mtd rowalign="bottom">\n                                                                    <mrow data-latex="\\AxiomC{B}" semantics="bspr_axiom:true">\n                                                                      <mspace width=".5ex"></mspace>\n                                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                                        <mtext>B</mtext>\n                                                                      </mstyle>\n                                                                      <mspace width=".5ex"></mspace>\n                                                                    </mrow>\n                                                                  </mtd>\n                                                                  <mtd></mtd>\n                                                                  <mtd rowalign="bottom">\n                                                                    <mrow data-latex="\\AxiomC{R}" semantics="bspr_axiom:true">\n                                                                      <mspace width=".5ex"></mspace>\n                                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                                        <mtext>R</mtext>\n                                                                      </mstyle>\n                                                                      <mspace width=".5ex"></mspace>\n                                                                    </mrow>\n                                                                  </mtd>\n                                                                </mtr>\n                                                              </mtable>\n                                                            </mtd>\n                                                          </mtr>\n                                                          <mtr>\n                                                            <mtd>\n                                                              <mrow>\n                                                                <mspace width=".5ex"></mspace>\n                                                                <mstyle displaystyle="false" scriptlevel="0">\n                                                                  <mrow data-mjx-texclass="ORD">\n                                                                    <mi data-latex="C">C</mi>\n                                                                    <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                    <mi data-latex="D">D</mi>\n                                                                    <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                    <mi data-latex="Q">Q</mi>\n                                                                  </mrow>\n                                                                </mstyle>\n                                                                <mspace width=".5ex"></mspace>\n                                                              </mrow>\n                                                            </mtd>\n                                                          </mtr>\n                                                        </mtable>\n                                                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                                          <mstyle displaystyle="false" scriptlevel="0">\n                                                            <mtext>AAAA</mtext>\n                                                          </mstyle>\n                                                        </mpadded>\n                                                      </mrow>\n                                                      <mspace width="-3.5em"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                </mtr>\n                                              </mtable>\n                                            </mtd>\n                                          </mtr>\n                                          <mtr>\n                                            <mtd>\n                                              <mrow>\n                                                <mspace width=".5ex"></mspace>\n                                                <mstyle displaystyle="false" scriptlevel="0">\n                                                  <mtext>E</mtext>\n                                                </mstyle>\n                                                <mspace width=".5ex"></mspace>\n                                              </mrow>\n                                            </mtd>\n                                          </mtr>\n                                        </mtable>\n                                      </mrow>\n                                      <mspace width="-3.795em"></mspace>\n                                    </mrow>\n                                  </mtd>\n                                </mtr>\n                              </mtable>\n                            </mtd>\n                          </mtr>\n                          <mtr>\n                            <mtd>\n                              <mrow>\n                                <mspace width=".5ex"></mspace>\n                                <mstyle displaystyle="false" scriptlevel="0">\n                                  <mtext>F</mtext>\n                                </mstyle>\n                                <mspace width=".5ex"></mspace>\n                              </mrow>\n                            </mtd>\n                          </mtr>\n                        </mtable>\n                      </mrow>\n                    </mrow>\n                  </mrow>\n                </mtd>\n                <mtd>\n                  <mspace width="3.795055555555555em"></mspace>\n                </mtd>\n                <mtd rowalign="bottom">\n                  <mrow data-latex="\\AxiomC{M}" semantics="bspr_axiom:true">\n                    <mspace width=".5ex"></mspace>\n                    <mstyle displaystyle="false" scriptlevel="0">\n                      <mtext>M</mtext>\n                    </mstyle>\n                    <mspace width=".5ex"></mspace>\n                  </mrow>\n                </mtd>\n              </mtr>\n            </mtable>\n          </mtd>\n        </mtr>\n        <mtr>\n          <mtd>\n            <mrow>\n              <mspace width=".5ex"></mspace>\n              <mstyle displaystyle="false" scriptlevel="0">\n                <mrow data-mjx-texclass="ORD">\n                  <mi data-latex="N">N</mi>\n                  <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                  <mi data-latex="R">R</mi>\n                </mrow>\n              </mstyle>\n              <mspace width=".5ex"></mspace>\n            </mrow>\n          </mtd>\n        </mtr>\n      </mtable>\n      <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n        <mstyle displaystyle="false" scriptlevel="0">\n          <mtext>QERE</mtext>\n        </mstyle>\n      </mpadded>\n    </mrow>\n  </mrow>\n</math>'
    ));
  it('Proof Very Right Label', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\RightLabel{AAAA}\\TrinaryInfC{Q}\\RightLabel{Nowhere}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\RightLabel{BBB}\\BinaryInfC{E}\\RightLabel{CCCCC}\\BinaryInfC{F}\\RightLabel{QERE}\\AxiomC{M}\\UnaryInfC{More and more}\\UnaryInfC{More and more}\\UnaryInfC{More and more}\\BinaryInfC{$N \\rightarrow R$}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\RightLabel{AAAA}\\TrinaryInfC{Q}\\RightLabel{Nowhere}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\RightLabel{BBB}\\BinaryInfC{E}\\RightLabel{CCCCC}\\BinaryInfC{F}\\RightLabel{QERE}\\AxiomC{M}\\UnaryInfC{More and more}\\UnaryInfC{More and more}\\UnaryInfC{More and more}\\BinaryInfC{$N \\rightarrow R$}\\end{prooftree}" display="block">\n  <mrow semantics="bspr_inference:2;bspr_proof:true">\n    <mspace width="9.977em"></mspace>\n    <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\begin{prooftree}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\RightLabel{AAAA}\\TrinaryInfC{Q}\\RightLabel{Nowhere}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\RightLabel{BBB}\\BinaryInfC{E}\\RightLabel{CCCCC}\\BinaryInfC{F}\\RightLabel{QERE}\\AxiomC{M}\\UnaryInfC{More and more}\\UnaryInfC{More and more}\\UnaryInfC{More and more}\\BinaryInfC{$N \\rightarrow R$}\\end{prooftree}" data-latex-item="{prooftree}" semantics="bspr_inferenceRule:down">\n      <mtr>\n        <mtd>\n          <mtable framespacing="0 0">\n            <mtr>\n              <mtd rowalign="bottom">\n                <mrow semantics="bspr_inference:2;bspr_labelledRule:right">\n                  <mspace width="-9.977em"></mspace>\n                  <mrow>\n                    <mspace width="3.274em"></mspace>\n                    <mrow data-latex="\\RightLabel{QERE}">\n                      <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                        <mtr>\n                          <mtd>\n                            <mtable framespacing="0 0">\n                              <mtr>\n                                <mtd rowalign="bottom">\n                                  <mrow semantics="bspr_inference:3;bspr_labelledRule:right">\n                                    <mspace width="-3.274em"></mspace>\n                                    <mrow data-latex="\\RightLabel{Nowhere}">\n                                      <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                        <mtr>\n                                          <mtd>\n                                            <mtable framespacing="0 0">\n                                              <mtr>\n                                                <mtd rowalign="bottom">\n                                                  <mrow data-latex="\\AxiomC{D}" semantics="bspr_axiom:true">\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mtext>D</mtext>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                                <mtd></mtd>\n                                                <mtd rowalign="bottom">\n                                                  <mrow data-latex="\\AxiomC{A1}" semantics="bspr_axiom:true">\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mtext>A1</mtext>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                                <mtd></mtd>\n                                                <mtd rowalign="bottom">\n                                                  <mrow data-latex="\\RightLabel{AAAA}" semantics="bspr_axiom:true">\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mtext>A2</mtext>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                              </mtr>\n                                            </mtable>\n                                          </mtd>\n                                        </mtr>\n                                        <mtr>\n                                          <mtd>\n                                            <mrow>\n                                              <mspace width=".5ex"></mspace>\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>Q</mtext>\n                                              </mstyle>\n                                              <mspace width=".5ex"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                        </mtr>\n                                      </mtable>\n                                      <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                        <mstyle displaystyle="false" scriptlevel="0">\n                                          <mtext>AAAA</mtext>\n                                        </mstyle>\n                                      </mpadded>\n                                    </mrow>\n                                  </mrow>\n                                </mtd>\n                                <mtd></mtd>\n                                <mtd rowalign="bottom">\n                                  <mrow semantics="bspr_inference:2;bspr_labelledRule:right">\n                                    <mrow data-latex="\\RightLabel{CCCCC}">\n                                      <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                        <mtr>\n                                          <mtd>\n                                            <mtable framespacing="0 0">\n                                              <mtr>\n                                                <mtd rowalign="bottom">\n                                                  <mrow data-latex="\\AxiomC{A}" semantics="bspr_axiom:true">\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mtext>A</mtext>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                                <mtd></mtd>\n                                                <mtd rowalign="bottom">\n                                                  <mrow semantics="bspr_inference:2;bspr_labelledRule:right">\n                                                    <mrow data-latex="\\RightLabel{BBB}">\n                                                      <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                                        <mtr>\n                                                          <mtd>\n                                                            <mtable framespacing="0 0">\n                                                              <mtr>\n                                                                <mtd rowalign="bottom">\n                                                                  <mrow data-latex="\\AxiomC{B}" semantics="bspr_axiom:true">\n                                                                    <mspace width=".5ex"></mspace>\n                                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                                      <mtext>B</mtext>\n                                                                    </mstyle>\n                                                                    <mspace width=".5ex"></mspace>\n                                                                  </mrow>\n                                                                </mtd>\n                                                                <mtd></mtd>\n                                                                <mtd rowalign="bottom">\n                                                                  <mrow data-latex="\\AxiomC{R}" semantics="bspr_axiom:true">\n                                                                    <mspace width=".5ex"></mspace>\n                                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                                      <mtext>R</mtext>\n                                                                    </mstyle>\n                                                                    <mspace width=".5ex"></mspace>\n                                                                  </mrow>\n                                                                </mtd>\n                                                              </mtr>\n                                                            </mtable>\n                                                          </mtd>\n                                                        </mtr>\n                                                        <mtr>\n                                                          <mtd>\n                                                            <mrow>\n                                                              <mspace width=".5ex"></mspace>\n                                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                                <mrow data-mjx-texclass="ORD">\n                                                                  <mi data-latex="C">C</mi>\n                                                                  <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                  <mi data-latex="D">D</mi>\n                                                                  <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                  <mi data-latex="Q">Q</mi>\n                                                                </mrow>\n                                                              </mstyle>\n                                                              <mspace width=".5ex"></mspace>\n                                                            </mrow>\n                                                          </mtd>\n                                                        </mtr>\n                                                      </mtable>\n                                                      <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                                        <mstyle displaystyle="false" scriptlevel="0">\n                                                          <mtext>Nowhere</mtext>\n                                                        </mstyle>\n                                                      </mpadded>\n                                                    </mrow>\n                                                    <mspace width="-4.308em"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                              </mtr>\n                                            </mtable>\n                                          </mtd>\n                                        </mtr>\n                                        <mtr>\n                                          <mtd>\n                                            <mrow>\n                                              <mspace width=".5ex"></mspace>\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>E</mtext>\n                                              </mstyle>\n                                              <mspace width=".5ex"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                        </mtr>\n                                      </mtable>\n                                      <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                        <mstyle displaystyle="false" scriptlevel="0">\n                                          <mtext>BBB</mtext>\n                                        </mstyle>\n                                      </mpadded>\n                                    </mrow>\n                                    <mspace width="-6.419em"></mspace>\n                                  </mrow>\n                                </mtd>\n                              </mtr>\n                            </mtable>\n                          </mtd>\n                        </mtr>\n                        <mtr>\n                          <mtd>\n                            <mrow>\n                              <mspace width=".5ex"></mspace>\n                              <mstyle displaystyle="false" scriptlevel="0">\n                                <mtext>F</mtext>\n                              </mstyle>\n                              <mspace width=".5ex"></mspace>\n                            </mrow>\n                          </mtd>\n                        </mtr>\n                      </mtable>\n                      <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                        <mstyle displaystyle="false" scriptlevel="0">\n                          <mtext>CCCCC</mtext>\n                        </mstyle>\n                      </mpadded>\n                    </mrow>\n                  </mrow>\n                </mrow>\n              </mtd>\n              <mtd>\n                <mspace width="2.309055555555555em"></mspace>\n              </mtd>\n              <mtd rowalign="bottom">\n                <mrow semantics="bspr_inference:1">\n                  <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\UnaryInfC{More and more}" semantics="bspr_inferenceRule:down">\n                    <mtr>\n                      <mtd>\n                        <mtable framespacing="0 0">\n                          <mtr>\n                            <mtd rowalign="bottom">\n                              <mrow semantics="bspr_inference:1">\n                                <mtable align="top 2" rowlines="solid" framespacing="0 0" data-latex="\\UnaryInfC{More and more}" semantics="bspr_inferenceRule:down">\n                                  <mtr>\n                                    <mtd>\n                                      <mtable framespacing="0 0">\n                                        <mtr>\n                                          <mtd rowalign="bottom">\n                                            <mrow semantics="bspr_inference:1;bspr_labelledRule:right">\n                                              <mrow data-latex="\\UnaryInfC{More and more}">\n                                                <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                                  <mtr>\n                                                    <mtd>\n                                                      <mtable framespacing="0 0">\n                                                        <mtr>\n                                                          <mtd rowalign="bottom">\n                                                            <mrow data-latex="\\AxiomC{M}" semantics="bspr_axiom:true">\n                                                              <mspace width=".5ex"></mspace>\n                                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                                <mtext>M</mtext>\n                                                              </mstyle>\n                                                              <mspace width=".5ex"></mspace>\n                                                            </mrow>\n                                                          </mtd>\n                                                        </mtr>\n                                                      </mtable>\n                                                    </mtd>\n                                                  </mtr>\n                                                  <mtr>\n                                                    <mtd>\n                                                      <mrow>\n                                                        <mspace width=".5ex"></mspace>\n                                                        <mstyle displaystyle="false" scriptlevel="0">\n                                                          <mtext>More and more</mtext>\n                                                        </mstyle>\n                                                        <mspace width=".5ex"></mspace>\n                                                      </mrow>\n                                                    </mtd>\n                                                  </mtr>\n                                                </mtable>\n                                                <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                                  <mstyle displaystyle="false" scriptlevel="0">\n                                                    <mtext>QERE</mtext>\n                                                  </mstyle>\n                                                </mpadded>\n                                              </mrow>\n                                              <mspace width="-3.376em"></mspace>\n                                            </mrow>\n                                          </mtd>\n                                        </mtr>\n                                      </mtable>\n                                    </mtd>\n                                  </mtr>\n                                  <mtr>\n                                    <mtd>\n                                      <mrow>\n                                        <mspace width=".5ex"></mspace>\n                                        <mstyle displaystyle="false" scriptlevel="0">\n                                          <mtext>More and more</mtext>\n                                        </mstyle>\n                                        <mspace width=".5ex"></mspace>\n                                      </mrow>\n                                    </mtd>\n                                  </mtr>\n                                </mtable>\n                                <mspace width="0em"></mspace>\n                              </mrow>\n                            </mtd>\n                          </mtr>\n                        </mtable>\n                      </mtd>\n                    </mtr>\n                    <mtr>\n                      <mtd>\n                        <mrow>\n                          <mspace width=".5ex"></mspace>\n                          <mstyle displaystyle="false" scriptlevel="0">\n                            <mtext>More and more</mtext>\n                          </mstyle>\n                          <mspace width=".5ex"></mspace>\n                        </mrow>\n                      </mtd>\n                    </mtr>\n                  </mtable>\n                  <mspace width="0em"></mspace>\n                </mrow>\n              </mtd>\n            </mtr>\n          </mtable>\n        </mtd>\n      </mtr>\n      <mtr>\n        <mtd>\n          <mrow>\n            <mspace width=".5ex"></mspace>\n            <mstyle displaystyle="false" scriptlevel="0">\n              <mrow data-mjx-texclass="ORD">\n                <mi data-latex="N">N</mi>\n                <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                <mi data-latex="R">R</mi>\n              </mrow>\n            </mstyle>\n            <mspace width=".5ex"></mspace>\n          </mrow>\n        </mtd>\n      </mtr>\n    </mtable>\n    <mspace width="0em"></mspace>\n  </mrow>\n</math>'
    ));
  it('Proof Complex', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\AXC{}\\RL{$Hyp^{1}$}\\UIC{$P$}\\AXC{$P\\rightarrow Q$}\\RL{$\\rightarrow_E$}\\solidLine\\BIC{$Q^2$}\\AXC{$Q\\rightarrow R$} \\RL{$\\rightarrow_E$} \\BIC{$R$} \\AXC{$Q$}\\RL{Rit$^2$} \\UIC{$Q$}\\RL{$\\wedge_I$}\\BIC{$Q\\wedge R$}\\RL{${\\rightarrow_I}^1$}\\UIC{$P\\rightarrow Q\\wedge R$}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\AXC{}\\RL{$Hyp^{1}$}\\UIC{$P$}\\AXC{$P\\rightarrow Q$}\\RL{$\\rightarrow_E$}\\solidLine\\BIC{$Q^2$}\\AXC{$Q\\rightarrow R$} \\RL{$\\rightarrow_E$} \\BIC{$R$} \\AXC{$Q$}\\RL{Rit$^2$} \\UIC{$Q$}\\RL{$\\wedge_I$}\\BIC{$Q\\wedge R$}\\RL{${\\rightarrow_I}^1$}\\UIC{$P\\rightarrow Q\\wedge R$}\\end{prooftree}" display="block">\n  <mrow semantics="bspr_inference:1;bspr_proof:true;bspr_labelledRule:right">\n    <mrow>\n      <mspace width="13.852em"></mspace>\n      <mrow data-latex="\\begin{prooftree}\\AXC{}\\RL{$Hyp^{1}$}\\UIC{$P$}\\AXC{$P\\rightarrow Q$}\\RL{$\\rightarrow_E$}\\solidLine\\BIC{$Q^2$}\\AXC{$Q\\rightarrow R$} \\RL{$\\rightarrow_E$} \\BIC{$R$} \\AXC{$Q$}\\RL{Rit$^2$} \\UIC{$Q$}\\RL{$\\wedge_I$}\\BIC{$Q\\wedge R$}\\RL{${\\rightarrow_I}^1$}\\UIC{$P\\rightarrow Q\\wedge R$}\\end{prooftree}" data-latex-item="{prooftree}">\n        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n          <mtr>\n            <mtd>\n              <mtable framespacing="0 0">\n                <mtr>\n                  <mtd rowalign="bottom">\n                    <mrow semantics="bspr_inference:2;bspr_labelledRule:right">\n                      <mrow>\n                        <mspace width="-13.852em"></mspace>\n                        <mrow>\n                          <mspace width="9.465em"></mspace>\n                          <mrow data-latex="\\RL{${\\rightarrow_I}^1$}">\n                            <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                              <mtr>\n                                <mtd>\n                                  <mtable framespacing="0 0">\n                                    <mtr>\n                                      <mtd rowalign="bottom">\n                                        <mrow semantics="bspr_inference:2;bspr_labelledRule:right">\n                                          <mspace width="-9.465em"></mspace>\n                                          <mrow>\n                                            <mspace width="3.734em"></mspace>\n                                            <mrow data-latex="\\BIC{$R$}">\n                                              <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                                <mtr>\n                                                  <mtd>\n                                                    <mtable framespacing="0 0">\n                                                      <mtr>\n                                                        <mtd rowalign="bottom">\n                                                          <mrow semantics="bspr_inference:2;bspr_labelledRule:right">\n                                                            <mspace width="-3.734em"></mspace>\n                                                            <mrow data-latex="\\BIC{$Q^2$}">\n                                                              <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                                                <mtr>\n                                                                  <mtd>\n                                                                    <mtable framespacing="0 0">\n                                                                      <mtr>\n                                                                        <mtd rowalign="bottom">\n                                                                          <mrow data-latex="\\UIC{$P$}" semantics="bspr_labelledRule:right;bspr_inference:0">\n                                                                            <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                                                              <mtr>\n                                                                                <mtd>\n                                                                                  <mtable framespacing="0 0">\n                                                                                    <mtr>\n                                                                                      <mtd rowalign="bottom">\n                                                                                        <mrow data-latex="\\RL{$Hyp^{1}$}" semantics="bspr_axiom:true"></mrow>\n                                                                                      </mtd>\n                                                                                    </mtr>\n                                                                                  </mtable>\n                                                                                </mtd>\n                                                                              </mtr>\n                                                                              <mtr>\n                                                                                <mtd>\n                                                                                  <mrow>\n                                                                                    <mspace width=".5ex"></mspace>\n                                                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                                                      <mrow data-mjx-texclass="ORD">\n                                                                                        <mi data-latex="P">P</mi>\n                                                                                      </mrow>\n                                                                                    </mstyle>\n                                                                                    <mspace width=".5ex"></mspace>\n                                                                                  </mrow>\n                                                                                </mtd>\n                                                                              </mtr>\n                                                                            </mtable>\n                                                                            <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                                                <mrow data-mjx-texclass="ORD">\n                                                                                  <mi data-latex="H">H</mi>\n                                                                                  <mi data-latex="y">y</mi>\n                                                                                  <msup data-latex="p^{1}">\n                                                                                    <mi data-latex="p">p</mi>\n                                                                                    <mrow data-mjx-texclass="ORD" data-latex="{1}">\n                                                                                      <mn data-latex="1">1</mn>\n                                                                                    </mrow>\n                                                                                  </msup>\n                                                                                </mrow>\n                                                                              </mstyle>\n                                                                            </mpadded>\n                                                                          </mrow>\n                                                                        </mtd>\n                                                                        <mtd></mtd>\n                                                                        <mtd rowalign="bottom">\n                                                                          <mrow data-latex="\\solidLine" semantics="bspr_axiom:true">\n                                                                            <mspace width=".5ex"></mspace>\n                                                                            <mstyle displaystyle="false" scriptlevel="0">\n                                                                              <mrow data-mjx-texclass="ORD">\n                                                                                <mi data-latex="P">P</mi>\n                                                                                <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                                <mi data-latex="Q">Q</mi>\n                                                                              </mrow>\n                                                                            </mstyle>\n                                                                            <mspace width=".5ex"></mspace>\n                                                                          </mrow>\n                                                                        </mtd>\n                                                                      </mtr>\n                                                                    </mtable>\n                                                                  </mtd>\n                                                                </mtr>\n                                                                <mtr>\n                                                                  <mtd>\n                                                                    <mrow>\n                                                                      <mspace width=".5ex"></mspace>\n                                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                                        <mrow data-mjx-texclass="ORD">\n                                                                          <msup data-latex="Q^2 ">\n                                                                            <mi data-latex="Q">Q</mi>\n                                                                            <mn data-latex="2">2</mn>\n                                                                          </msup>\n                                                                        </mrow>\n                                                                      </mstyle>\n                                                                      <mspace width=".5ex"></mspace>\n                                                                    </mrow>\n                                                                  </mtd>\n                                                                </mtr>\n                                                              </mtable>\n                                                              <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                                                <mstyle displaystyle="false" scriptlevel="0">\n                                                                  <mrow data-mjx-texclass="ORD">\n                                                                    <msub data-latex="\\rightarrow_E">\n                                                                      <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                      <mi data-latex="E">E</mi>\n                                                                    </msub>\n                                                                  </mrow>\n                                                                </mstyle>\n                                                              </mpadded>\n                                                            </mrow>\n                                                          </mrow>\n                                                        </mtd>\n                                                        <mtd></mtd>\n                                                        <mtd rowalign="bottom">\n                                                          <mrow data-latex="\\RL{$\\rightarrow_E$}" semantics="bspr_axiom:true">\n                                                            <mspace width=".5ex"></mspace>\n                                                            <mstyle displaystyle="false" scriptlevel="0">\n                                                              <mrow data-mjx-texclass="ORD">\n                                                                <mi data-latex="Q">Q</mi>\n                                                                <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                <mi data-latex="R">R</mi>\n                                                              </mrow>\n                                                            </mstyle>\n                                                            <mspace width=".5ex"></mspace>\n                                                          </mrow>\n                                                        </mtd>\n                                                      </mtr>\n                                                    </mtable>\n                                                  </mtd>\n                                                </mtr>\n                                                <mtr>\n                                                  <mtd>\n                                                    <mrow>\n                                                      <mspace width=".5ex"></mspace>\n                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                        <mrow data-mjx-texclass="ORD">\n                                                          <mi data-latex="R">R</mi>\n                                                        </mrow>\n                                                      </mstyle>\n                                                      <mspace width=".5ex"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                </mtr>\n                                              </mtable>\n                                              <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                                <mstyle displaystyle="false" scriptlevel="0">\n                                                  <mrow data-mjx-texclass="ORD">\n                                                    <msub data-latex="\\rightarrow_E">\n                                                      <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                      <mi data-latex="E">E</mi>\n                                                    </msub>\n                                                  </mrow>\n                                                </mstyle>\n                                              </mpadded>\n                                            </mrow>\n                                          </mrow>\n                                        </mrow>\n                                      </mtd>\n                                      <mtd></mtd>\n                                      <mtd rowalign="bottom">\n                                        <mrow semantics="bspr_inference:1;bspr_labelledRule:right">\n                                          <mrow data-latex="\\RL{$\\wedge_I$}">\n                                            <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                              <mtr>\n                                                <mtd>\n                                                  <mtable framespacing="0 0">\n                                                    <mtr>\n                                                      <mtd rowalign="bottom">\n                                                        <mrow data-latex="\\RL{Rit$^2$}" semantics="bspr_axiom:true">\n                                                          <mspace width=".5ex"></mspace>\n                                                          <mstyle displaystyle="false" scriptlevel="0">\n                                                            <mrow data-mjx-texclass="ORD">\n                                                              <mi data-latex="Q">Q</mi>\n                                                            </mrow>\n                                                          </mstyle>\n                                                          <mspace width=".5ex"></mspace>\n                                                        </mrow>\n                                                      </mtd>\n                                                    </mtr>\n                                                  </mtable>\n                                                </mtd>\n                                              </mtr>\n                                              <mtr>\n                                                <mtd>\n                                                  <mrow>\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mrow data-mjx-texclass="ORD">\n                                                        <mi data-latex="Q">Q</mi>\n                                                      </mrow>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                              </mtr>\n                                            </mtable>\n                                            <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>Rit</mtext>\n                                                <mrow data-mjx-texclass="ORD">\n                                                  <msup data-latex="^2 ">\n                                                    <mi></mi>\n                                                    <mn data-latex="2">2</mn>\n                                                  </msup>\n                                                </mrow>\n                                              </mstyle>\n                                            </mpadded>\n                                          </mrow>\n                                          <mspace width="-2.34em"></mspace>\n                                        </mrow>\n                                      </mtd>\n                                    </mtr>\n                                  </mtable>\n                                </mtd>\n                              </mtr>\n                              <mtr>\n                                <mtd>\n                                  <mrow>\n                                    <mspace width=".5ex"></mspace>\n                                    <mstyle displaystyle="false" scriptlevel="0">\n                                      <mrow data-mjx-texclass="ORD">\n                                        <mi data-latex="Q">Q</mi>\n                                        <mo data-latex="\\wedge">&#x2227;</mo>\n                                        <mi data-latex="R">R</mi>\n                                      </mrow>\n                                    </mstyle>\n                                    <mspace width=".5ex"></mspace>\n                                  </mrow>\n                                </mtd>\n                              </mtr>\n                            </mtable>\n                            <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                              <mstyle displaystyle="false" scriptlevel="0">\n                                <mrow data-mjx-texclass="ORD">\n                                  <msub data-latex="\\wedge_I">\n                                    <mo data-latex="\\wedge">&#x2227;</mo>\n                                    <mi data-latex="I">I</mi>\n                                  </msub>\n                                </mrow>\n                              </mstyle>\n                            </mpadded>\n                          </mrow>\n                        </mrow>\n                      </mrow>\n                      <mspace width="-5.989em"></mspace>\n                    </mrow>\n                  </mtd>\n                </mtr>\n              </mtable>\n            </mtd>\n          </mtr>\n          <mtr>\n            <mtd>\n              <mrow>\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mrow data-mjx-texclass="ORD">\n                    <mi data-latex="P">P</mi>\n                    <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                    <mi data-latex="Q">Q</mi>\n                    <mo data-latex="\\wedge">&#x2227;</mo>\n                    <mi data-latex="R">R</mi>\n                  </mrow>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n          </mtr>\n        </mtable>\n        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n          <mstyle displaystyle="false" scriptlevel="0">\n            <mrow data-mjx-texclass="ORD">\n              <msup data-latex="{\\rightarrow_I}^1 ">\n                <mrow data-mjx-texclass="ORD" data-latex="{\\rightarrow_I}">\n                  <msub data-latex="\\rightarrow_I">\n                    <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                    <mi data-latex="I">I</mi>\n                  </msub>\n                </mrow>\n                <mn data-latex="1">1</mn>\n              </msup>\n            </mrow>\n          </mstyle>\n        </mpadded>\n      </mrow>\n    </mrow>\n    <mspace width="3.618em"></mspace>\n  </mrow>\n</math>'
    ));
  it('Proof Mixing Order', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\alwaysRootAtTop\\AXC{}\\RL{$Hyp^{1}$}\\UIC{$P$}\\AXC{$P\\rightarrow Q$}\\RL{$\\rightarrow_E$}\\solidLine\\BIC{$Q^2$}\\alwaysRootAtBottom\\AXC{$Q\\rightarrow R$} \\RL{$\\rightarrow_E$} \\BIC{$R$} \\AXC{$Q$}\\RL{Rit$^2$} \\UIC{$Q$}\\RL{$\\wedge_I$}\\BIC{$Q\\wedge R$}\\RL{${\\rightarrow_I}^1$}\\UIC{$P\\rightarrow Q\\wedge R$}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\alwaysRootAtTop\\AXC{}\\RL{$Hyp^{1}$}\\UIC{$P$}\\AXC{$P\\rightarrow Q$}\\RL{$\\rightarrow_E$}\\solidLine\\BIC{$Q^2$}\\alwaysRootAtBottom\\AXC{$Q\\rightarrow R$} \\RL{$\\rightarrow_E$} \\BIC{$R$} \\AXC{$Q$}\\RL{Rit$^2$} \\UIC{$Q$}\\RL{$\\wedge_I$}\\BIC{$Q\\wedge R$}\\RL{${\\rightarrow_I}^1$}\\UIC{$P\\rightarrow Q\\wedge R$}\\end{prooftree}" display="block">\n  <mrow semantics="bspr_inference:1;bspr_proof:true;bspr_labelledRule:right">\n    <mrow>\n      <mspace width="13.852em"></mspace>\n      <mrow data-latex="\\begin{prooftree}\\alwaysRootAtTop\\AXC{}\\RL{$Hyp^{1}$}\\UIC{$P$}\\AXC{$P\\rightarrow Q$}\\RL{$\\rightarrow_E$}\\solidLine\\BIC{$Q^2$}\\alwaysRootAtBottom\\AXC{$Q\\rightarrow R$} \\RL{$\\rightarrow_E$} \\BIC{$R$} \\AXC{$Q$}\\RL{Rit$^2$} \\UIC{$Q$}\\RL{$\\wedge_I$}\\BIC{$Q\\wedge R$}\\RL{${\\rightarrow_I}^1$}\\UIC{$P\\rightarrow Q\\wedge R$}\\end{prooftree}" data-latex-item="{prooftree}">\n        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n          <mtr>\n            <mtd>\n              <mtable framespacing="0 0">\n                <mtr>\n                  <mtd rowalign="bottom">\n                    <mrow semantics="bspr_inference:2;bspr_labelledRule:right">\n                      <mrow>\n                        <mspace width="-13.852em"></mspace>\n                        <mrow>\n                          <mspace width="9.465em"></mspace>\n                          <mrow data-latex="\\RL{${\\rightarrow_I}^1$}">\n                            <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                              <mtr>\n                                <mtd>\n                                  <mtable framespacing="0 0">\n                                    <mtr>\n                                      <mtd rowalign="bottom">\n                                        <mrow semantics="bspr_inference:2;bspr_labelledRule:right">\n                                          <mspace width="-9.465em"></mspace>\n                                          <mrow>\n                                            <mspace width="3.734em"></mspace>\n                                            <mrow data-latex="\\BIC{$R$}">\n                                              <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                                <mtr>\n                                                  <mtd>\n                                                    <mtable framespacing="0 0">\n                                                      <mtr>\n                                                        <mtd rowalign="bottom">\n                                                          <mrow semantics="bspr_inference:2;bspr_labelledRule:right">\n                                                            <mspace width="-3.734em"></mspace>\n                                                            <mrow data-latex="\\alwaysRootAtBottom">\n                                                              <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:up">\n                                                                <mtr>\n                                                                  <mtd>\n                                                                    <mrow>\n                                                                      <mspace width=".5ex"></mspace>\n                                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                                        <mrow data-mjx-texclass="ORD">\n                                                                          <msup data-latex="Q^2 ">\n                                                                            <mi data-latex="Q">Q</mi>\n                                                                            <mn data-latex="2">2</mn>\n                                                                          </msup>\n                                                                        </mrow>\n                                                                      </mstyle>\n                                                                      <mspace width=".5ex"></mspace>\n                                                                    </mrow>\n                                                                  </mtd>\n                                                                </mtr>\n                                                                <mtr>\n                                                                  <mtd>\n                                                                    <mtable framespacing="0 0">\n                                                                      <mtr>\n                                                                        <mtd rowalign="top">\n                                                                          <mrow data-latex="\\UIC{$P$}" semantics="bspr_labelledRule:right;bspr_inference:0">\n                                                                            <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:up">\n                                                                              <mtr>\n                                                                                <mtd>\n                                                                                  <mrow>\n                                                                                    <mspace width=".5ex"></mspace>\n                                                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                                                      <mrow data-mjx-texclass="ORD">\n                                                                                        <mi data-latex="P">P</mi>\n                                                                                      </mrow>\n                                                                                    </mstyle>\n                                                                                    <mspace width=".5ex"></mspace>\n                                                                                  </mrow>\n                                                                                </mtd>\n                                                                              </mtr>\n                                                                              <mtr>\n                                                                                <mtd>\n                                                                                  <mtable framespacing="0 0">\n                                                                                    <mtr>\n                                                                                      <mtd rowalign="top">\n                                                                                        <mrow data-latex="\\RL{$Hyp^{1}$}" semantics="bspr_axiom:true"></mrow>\n                                                                                      </mtd>\n                                                                                    </mtr>\n                                                                                  </mtable>\n                                                                                </mtd>\n                                                                              </mtr>\n                                                                            </mtable>\n                                                                            <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                                                <mrow data-mjx-texclass="ORD">\n                                                                                  <mi data-latex="H">H</mi>\n                                                                                  <mi data-latex="y">y</mi>\n                                                                                  <msup data-latex="p^{1}">\n                                                                                    <mi data-latex="p">p</mi>\n                                                                                    <mrow data-mjx-texclass="ORD" data-latex="{1}">\n                                                                                      <mn data-latex="1">1</mn>\n                                                                                    </mrow>\n                                                                                  </msup>\n                                                                                </mrow>\n                                                                              </mstyle>\n                                                                            </mpadded>\n                                                                          </mrow>\n                                                                        </mtd>\n                                                                        <mtd></mtd>\n                                                                        <mtd rowalign="top">\n                                                                          <mrow data-latex="\\solidLine" semantics="bspr_axiom:true">\n                                                                            <mspace width=".5ex"></mspace>\n                                                                            <mstyle displaystyle="false" scriptlevel="0">\n                                                                              <mrow data-mjx-texclass="ORD">\n                                                                                <mi data-latex="P">P</mi>\n                                                                                <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                                <mi data-latex="Q">Q</mi>\n                                                                              </mrow>\n                                                                            </mstyle>\n                                                                            <mspace width=".5ex"></mspace>\n                                                                          </mrow>\n                                                                        </mtd>\n                                                                      </mtr>\n                                                                    </mtable>\n                                                                  </mtd>\n                                                                </mtr>\n                                                              </mtable>\n                                                              <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                                                <mstyle displaystyle="false" scriptlevel="0">\n                                                                  <mrow data-mjx-texclass="ORD">\n                                                                    <msub data-latex="\\rightarrow_E">\n                                                                      <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                      <mi data-latex="E">E</mi>\n                                                                    </msub>\n                                                                  </mrow>\n                                                                </mstyle>\n                                                              </mpadded>\n                                                            </mrow>\n                                                          </mrow>\n                                                        </mtd>\n                                                        <mtd></mtd>\n                                                        <mtd rowalign="bottom">\n                                                          <mrow data-latex="\\RL{$\\rightarrow_E$}" semantics="bspr_axiom:true">\n                                                            <mspace width=".5ex"></mspace>\n                                                            <mstyle displaystyle="false" scriptlevel="0">\n                                                              <mrow data-mjx-texclass="ORD">\n                                                                <mi data-latex="Q">Q</mi>\n                                                                <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                <mi data-latex="R">R</mi>\n                                                              </mrow>\n                                                            </mstyle>\n                                                            <mspace width=".5ex"></mspace>\n                                                          </mrow>\n                                                        </mtd>\n                                                      </mtr>\n                                                    </mtable>\n                                                  </mtd>\n                                                </mtr>\n                                                <mtr>\n                                                  <mtd>\n                                                    <mrow>\n                                                      <mspace width=".5ex"></mspace>\n                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                        <mrow data-mjx-texclass="ORD">\n                                                          <mi data-latex="R">R</mi>\n                                                        </mrow>\n                                                      </mstyle>\n                                                      <mspace width=".5ex"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                </mtr>\n                                              </mtable>\n                                              <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                                <mstyle displaystyle="false" scriptlevel="0">\n                                                  <mrow data-mjx-texclass="ORD">\n                                                    <msub data-latex="\\rightarrow_E">\n                                                      <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                      <mi data-latex="E">E</mi>\n                                                    </msub>\n                                                  </mrow>\n                                                </mstyle>\n                                              </mpadded>\n                                            </mrow>\n                                          </mrow>\n                                        </mrow>\n                                      </mtd>\n                                      <mtd></mtd>\n                                      <mtd rowalign="bottom">\n                                        <mrow semantics="bspr_inference:1;bspr_labelledRule:right">\n                                          <mrow data-latex="\\RL{$\\wedge_I$}">\n                                            <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                              <mtr>\n                                                <mtd>\n                                                  <mtable framespacing="0 0">\n                                                    <mtr>\n                                                      <mtd rowalign="bottom">\n                                                        <mrow data-latex="\\RL{Rit$^2$}" semantics="bspr_axiom:true">\n                                                          <mspace width=".5ex"></mspace>\n                                                          <mstyle displaystyle="false" scriptlevel="0">\n                                                            <mrow data-mjx-texclass="ORD">\n                                                              <mi data-latex="Q">Q</mi>\n                                                            </mrow>\n                                                          </mstyle>\n                                                          <mspace width=".5ex"></mspace>\n                                                        </mrow>\n                                                      </mtd>\n                                                    </mtr>\n                                                  </mtable>\n                                                </mtd>\n                                              </mtr>\n                                              <mtr>\n                                                <mtd>\n                                                  <mrow>\n                                                    <mspace width=".5ex"></mspace>\n                                                    <mstyle displaystyle="false" scriptlevel="0">\n                                                      <mrow data-mjx-texclass="ORD">\n                                                        <mi data-latex="Q">Q</mi>\n                                                      </mrow>\n                                                    </mstyle>\n                                                    <mspace width=".5ex"></mspace>\n                                                  </mrow>\n                                                </mtd>\n                                              </mtr>\n                                            </mtable>\n                                            <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                              <mstyle displaystyle="false" scriptlevel="0">\n                                                <mtext>Rit</mtext>\n                                                <mrow data-mjx-texclass="ORD">\n                                                  <msup data-latex="^2 ">\n                                                    <mi></mi>\n                                                    <mn data-latex="2">2</mn>\n                                                  </msup>\n                                                </mrow>\n                                              </mstyle>\n                                            </mpadded>\n                                          </mrow>\n                                          <mspace width="-2.34em"></mspace>\n                                        </mrow>\n                                      </mtd>\n                                    </mtr>\n                                  </mtable>\n                                </mtd>\n                              </mtr>\n                              <mtr>\n                                <mtd>\n                                  <mrow>\n                                    <mspace width=".5ex"></mspace>\n                                    <mstyle displaystyle="false" scriptlevel="0">\n                                      <mrow data-mjx-texclass="ORD">\n                                        <mi data-latex="Q">Q</mi>\n                                        <mo data-latex="\\wedge">&#x2227;</mo>\n                                        <mi data-latex="R">R</mi>\n                                      </mrow>\n                                    </mstyle>\n                                    <mspace width=".5ex"></mspace>\n                                  </mrow>\n                                </mtd>\n                              </mtr>\n                            </mtable>\n                            <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                              <mstyle displaystyle="false" scriptlevel="0">\n                                <mrow data-mjx-texclass="ORD">\n                                  <msub data-latex="\\wedge_I">\n                                    <mo data-latex="\\wedge">&#x2227;</mo>\n                                    <mi data-latex="I">I</mi>\n                                  </msub>\n                                </mrow>\n                              </mstyle>\n                            </mpadded>\n                          </mrow>\n                        </mrow>\n                      </mrow>\n                      <mspace width="-5.989em"></mspace>\n                    </mrow>\n                  </mtd>\n                </mtr>\n              </mtable>\n            </mtd>\n          </mtr>\n          <mtr>\n            <mtd>\n              <mrow>\n                <mspace width=".5ex"></mspace>\n                <mstyle displaystyle="false" scriptlevel="0">\n                  <mrow data-mjx-texclass="ORD">\n                    <mi data-latex="P">P</mi>\n                    <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                    <mi data-latex="Q">Q</mi>\n                    <mo data-latex="\\wedge">&#x2227;</mo>\n                    <mi data-latex="R">R</mi>\n                  </mrow>\n                </mstyle>\n                <mspace width=".5ex"></mspace>\n              </mrow>\n            </mtd>\n          </mtr>\n        </mtable>\n        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n          <mstyle displaystyle="false" scriptlevel="0">\n            <mrow data-mjx-texclass="ORD">\n              <msup data-latex="{\\rightarrow_I}^1 ">\n                <mrow data-mjx-texclass="ORD" data-latex="{\\rightarrow_I}">\n                  <msub data-latex="\\rightarrow_I">\n                    <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                    <mi data-latex="I">I</mi>\n                  </msub>\n                </mrow>\n                <mn data-latex="1">1</mn>\n              </msup>\n            </mrow>\n          </mstyle>\n        </mpadded>\n      </mrow>\n    </mrow>\n    <mspace width="3.618em"></mspace>\n  </mrow>\n</math>'
    ));
  it('Extreme', () =>
    toXmlMatch(
      tex2mml(
        '\\begin{prooftree}\\LL{HHHHH}\\RL{11111111111111111}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\RightLabel{AAAA}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\LL{qqqq}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\LeftLabel{BBBB}\\RightLabel{MMM}\\BinaryInfC{E}\\RightLabel{CCCCC}\\LL{WWW}\\BinaryInfC{F}\\RightLabel{QERE}\\AxiomC{M}\\LL{BBB}\\BinaryInfC{$N \\rightarrow R$}\\RightLabel{Nowhere}\\end{prooftree}'
      ),
      '<math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\\begin{prooftree}\\LL{HHHHH}\\RL{11111111111111111}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\RightLabel{AAAA}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\LL{qqqq}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\LeftLabel{BBBB}\\RightLabel{MMM}\\BinaryInfC{E}\\RightLabel{CCCCC}\\LL{WWW}\\BinaryInfC{F}\\RightLabel{QERE}\\AxiomC{M}\\LL{BBB}\\BinaryInfC{$N \\rightarrow R$}\\RightLabel{Nowhere}\\end{prooftree}" display="block">\n  <mrow semantics="bspr_inference:2;bspr_proof:true;bspr_labelledRule:both">\n    <mspace width="16.672em"></mspace>\n    <mrow data-latex="\\begin{prooftree}\\LL{HHHHH}\\RL{11111111111111111}\\AxiomC{D}\\AxiomC{A1}\\AxiomC{A2}\\TrinaryInfC{Q}\\RightLabel{AAAA}\\AxiomC{A}\\AxiomC{B}\\AxiomC{R}\\LL{qqqq}\\BinaryInfC{$C \\rightarrow D \\rightarrow Q$}\\LeftLabel{BBBB}\\RightLabel{MMM}\\BinaryInfC{E}\\RightLabel{CCCCC}\\LL{WWW}\\BinaryInfC{F}\\RightLabel{QERE}\\AxiomC{M}\\LL{BBB}\\BinaryInfC{$N \\rightarrow R$}\\RightLabel{Nowhere}\\end{prooftree}" data-latex-item="{prooftree}">\n      <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n        <mstyle displaystyle="false" scriptlevel="0">\n          <mtext>BBB</mtext>\n        </mstyle>\n      </mpadded>\n      <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n        <mtr>\n          <mtd>\n            <mtable framespacing="0 0">\n              <mtr>\n                <mtd rowalign="bottom">\n                  <mrow semantics="bspr_inference:2;bspr_labelledRule:both">\n                    <mspace width="-19.296em"></mspace>\n                    <mrow>\n                      <mspace width="3.94em"></mspace>\n                      <mrow data-latex="\\RightLabel{QERE}">\n                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n                          <mstyle displaystyle="false" scriptlevel="0">\n                            <mtext>WWW</mtext>\n                          </mstyle>\n                        </mpadded>\n                        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                          <mtr>\n                            <mtd>\n                              <mtable framespacing="0 0">\n                                <mtr>\n                                  <mtd rowalign="bottom">\n                                    <mrow semantics="bspr_inference:3;bspr_labelledRule:both">\n                                      <mspace width="-7.524em"></mspace>\n                                      <mrow data-latex="\\RightLabel{AAAA}">\n                                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n                                          <mstyle displaystyle="false" scriptlevel="0">\n                                            <mtext>HHHHH</mtext>\n                                          </mstyle>\n                                        </mpadded>\n                                        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                          <mtr>\n                                            <mtd>\n                                              <mtable framespacing="0 0">\n                                                <mtr>\n                                                  <mtd rowalign="bottom">\n                                                    <mrow data-latex="\\AxiomC{D}" semantics="bspr_axiom:true">\n                                                      <mspace width=".5ex"></mspace>\n                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                        <mtext>D</mtext>\n                                                      </mstyle>\n                                                      <mspace width=".5ex"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                  <mtd></mtd>\n                                                  <mtd rowalign="bottom">\n                                                    <mrow data-latex="\\AxiomC{A1}" semantics="bspr_axiom:true">\n                                                      <mspace width=".5ex"></mspace>\n                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                        <mtext>A1</mtext>\n                                                      </mstyle>\n                                                      <mspace width=".5ex"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                  <mtd></mtd>\n                                                  <mtd rowalign="bottom">\n                                                    <mrow data-latex="\\AxiomC{A2}" semantics="bspr_axiom:true">\n                                                      <mspace width=".5ex"></mspace>\n                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                        <mtext>A2</mtext>\n                                                      </mstyle>\n                                                      <mspace width=".5ex"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                </mtr>\n                                              </mtable>\n                                            </mtd>\n                                          </mtr>\n                                          <mtr>\n                                            <mtd>\n                                              <mrow>\n                                                <mspace width=".5ex"></mspace>\n                                                <mstyle displaystyle="false" scriptlevel="0">\n                                                  <mtext>Q</mtext>\n                                                </mstyle>\n                                                <mspace width=".5ex"></mspace>\n                                              </mrow>\n                                            </mtd>\n                                          </mtr>\n                                        </mtable>\n                                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                          <mstyle displaystyle="false" scriptlevel="0">\n                                            <mtext>11111111111111111</mtext>\n                                          </mstyle>\n                                        </mpadded>\n                                      </mrow>\n                                    </mrow>\n                                  </mtd>\n                                  <mtd></mtd>\n                                  <mtd rowalign="bottom">\n                                    <mrow semantics="bspr_inference:2;bspr_labelledRule:both">\n                                      <mrow data-latex="\\LL{WWW}">\n                                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n                                          <mstyle displaystyle="false" scriptlevel="0">\n                                            <mtext>BBBB</mtext>\n                                          </mstyle>\n                                        </mpadded>\n                                        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                          <mtr>\n                                            <mtd>\n                                              <mtable framespacing="0 0">\n                                                <mtr>\n                                                  <mtd rowalign="bottom">\n                                                    <mrow data-latex="\\AxiomC{A}" semantics="bspr_axiom:true">\n                                                      <mspace width=".5ex"></mspace>\n                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                        <mtext>A</mtext>\n                                                      </mstyle>\n                                                      <mspace width=".5ex"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                  <mtd></mtd>\n                                                  <mtd rowalign="bottom">\n                                                    <mrow semantics="bspr_inference:2;bspr_labelledRule:both">\n                                                      <mrow data-latex="\\RightLabel{MMM}">\n                                                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:left">\n                                                          <mstyle displaystyle="false" scriptlevel="0">\n                                                            <mtext>qqqq</mtext>\n                                                          </mstyle>\n                                                        </mpadded>\n                                                        <mtable align="top 2" rowlines="solid" framespacing="0 0" semantics="bspr_inferenceRule:down">\n                                                          <mtr>\n                                                            <mtd>\n                                                              <mtable framespacing="0 0">\n                                                                <mtr>\n                                                                  <mtd rowalign="bottom">\n                                                                    <mrow data-latex="\\AxiomC{B}" semantics="bspr_axiom:true">\n                                                                      <mspace width=".5ex"></mspace>\n                                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                                        <mtext>B</mtext>\n                                                                      </mstyle>\n                                                                      <mspace width=".5ex"></mspace>\n                                                                    </mrow>\n                                                                  </mtd>\n                                                                  <mtd></mtd>\n                                                                  <mtd rowalign="bottom">\n                                                                    <mrow data-latex="\\LL{qqqq}" semantics="bspr_axiom:true">\n                                                                      <mspace width=".5ex"></mspace>\n                                                                      <mstyle displaystyle="false" scriptlevel="0">\n                                                                        <mtext>R</mtext>\n                                                                      </mstyle>\n                                                                      <mspace width=".5ex"></mspace>\n                                                                    </mrow>\n                                                                  </mtd>\n                                                                </mtr>\n                                                              </mtable>\n                                                            </mtd>\n                                                          </mtr>\n                                                          <mtr>\n                                                            <mtd>\n                                                              <mrow>\n                                                                <mspace width=".5ex"></mspace>\n                                                                <mstyle displaystyle="false" scriptlevel="0">\n                                                                  <mrow data-mjx-texclass="ORD">\n                                                                    <mi data-latex="C">C</mi>\n                                                                    <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                    <mi data-latex="D">D</mi>\n                                                                    <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                                                                    <mi data-latex="Q">Q</mi>\n                                                                  </mrow>\n                                                                </mstyle>\n                                                                <mspace width=".5ex"></mspace>\n                                                              </mrow>\n                                                            </mtd>\n                                                          </mtr>\n                                                        </mtable>\n                                                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                                          <mstyle displaystyle="false" scriptlevel="0">\n                                                            <mtext>AAAA</mtext>\n                                                          </mstyle>\n                                                        </mpadded>\n                                                      </mrow>\n                                                      <mspace width="-3.5em"></mspace>\n                                                    </mrow>\n                                                  </mtd>\n                                                </mtr>\n                                              </mtable>\n                                            </mtd>\n                                          </mtr>\n                                          <mtr>\n                                            <mtd>\n                                              <mrow>\n                                                <mspace width=".5ex"></mspace>\n                                                <mstyle displaystyle="false" scriptlevel="0">\n                                                  <mtext>E</mtext>\n                                                </mstyle>\n                                                <mspace width=".5ex"></mspace>\n                                              </mrow>\n                                            </mtd>\n                                          </mtr>\n                                        </mtable>\n                                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                                          <mstyle displaystyle="false" scriptlevel="0">\n                                            <mtext>MMM</mtext>\n                                          </mstyle>\n                                        </mpadded>\n                                      </mrow>\n                                      <mspace width="-8.352em"></mspace>\n                                    </mrow>\n                                  </mtd>\n                                </mtr>\n                              </mtable>\n                            </mtd>\n                          </mtr>\n                          <mtr>\n                            <mtd>\n                              <mrow>\n                                <mspace width=".5ex"></mspace>\n                                <mstyle displaystyle="false" scriptlevel="0">\n                                  <mtext>F</mtext>\n                                </mstyle>\n                                <mspace width=".5ex"></mspace>\n                              </mrow>\n                            </mtd>\n                          </mtr>\n                        </mtable>\n                        <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n                          <mstyle displaystyle="false" scriptlevel="0">\n                            <mtext>CCCCC</mtext>\n                          </mstyle>\n                        </mpadded>\n                      </mrow>\n                    </mrow>\n                  </mrow>\n                </mtd>\n                <mtd>\n                  <mspace width="4.242055555555558em"></mspace>\n                </mtd>\n                <mtd rowalign="bottom">\n                  <mrow data-latex="\\LL{BBB}" semantics="bspr_axiom:true">\n                    <mspace width=".5ex"></mspace>\n                    <mstyle displaystyle="false" scriptlevel="0">\n                      <mtext>M</mtext>\n                    </mstyle>\n                    <mspace width=".5ex"></mspace>\n                  </mrow>\n                </mtd>\n              </mtr>\n            </mtable>\n          </mtd>\n        </mtr>\n        <mtr>\n          <mtd>\n            <mrow>\n              <mspace width=".5ex"></mspace>\n              <mstyle displaystyle="false" scriptlevel="0">\n                <mrow data-mjx-texclass="ORD">\n                  <mi data-latex="N">N</mi>\n                  <mo stretchy="false" data-latex="\\rightarrow">&#x2192;</mo>\n                  <mi data-latex="R">R</mi>\n                </mrow>\n              </mstyle>\n              <mspace width=".5ex"></mspace>\n            </mrow>\n          </mtd>\n        </mtr>\n      </mtable>\n      <mpadded height="+.5em" width="+.5em" voffset="-.15em" semantics="bspr_prooflabel:right">\n        <mstyle displaystyle="false" scriptlevel="0">\n          <mtext>QERE</mtext>\n        </mstyle>\n      </mpadded>\n    </mrow>\n  </mrow>\n</math>'
    ));
});
